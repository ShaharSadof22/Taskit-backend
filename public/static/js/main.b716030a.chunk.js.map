{"version":3,"sources":["cmps/BoardPreview.jsx","cmps/BoardList.jsx","services/httpService.js","services/boardService.js","services/socketService.js","store/actions/boardActions.js","cmps/Modal.jsx","services/cloudinaryService.js","cmps/AddImg.jsx","cmps/AddBoard.jsx","pages/BoardApp.jsx","cmps/MenuColorModal.jsx","cmps/SideBarMenu.jsx","services/asyncStorageService.js","services/userService.js","cmps/BoardInvite.jsx","cmps/BoardHeader.jsx","cmps/CardPreview.jsx","cmps/AddText.jsx","cmps/CardListMenu.jsx","cmps/CardList.jsx","cmps/Canvas.jsx","cmps/ColorModal.jsx","cmps/TodoPreview.jsx","cmps/ChecklistPreview.jsx","cmps/Checklist.jsx","cmps/ChecklistAdd.jsx","cmps/CardInvite.jsx","cmps/CardDetails.jsx","pages/BoardDetails.jsx","cmps/MembersChart.jsx","pages/GraphDetails.jsx","routes.js","pages/Home.jsx","cmps/Login.jsx","store/actions/userActions.js","cmps/Submit.jsx","cmps/NavBar.jsx","App.jsx","store/reducers/boardReducer.js","store/reducers/userReducer.js","store/store.js","index.js"],"names":["BoardPreview","board","to","_id","style","bgImg","backgroundImage","backgroundSize","backgroundRepeat","backgroundColor","bgColor","className","width","title","BoardList","boards","onAddBoard","dir","map","key","onClick","cursor","paddingTop","axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","console","log","boardService","query","filterBy","httpService","loadBoard","boardId","removeBoard","update","getCardById","groupId","cardId","groups","find","group","id","cards","card","txt","imgUrl","makeId","description","_createBoard","addActivity","ActivityType","changeIn","user","activities","unshift","createdAt","Date","propertyTitle","byMember","removeActivities","length","possible","i","charAt","Math","floor","random","socket","setup","io","terminate","on","eventName","cb","off","emit","broadcastEmit","broadcast","updateBoard","dispatch","type","socketService","Modal","children","this","props","onClose","isForLog","ev","stopPropagation","onLoginHere","React","Component","cloudinaryService","uploadImg","dataURLtoFile","dataurl","filename","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","uploadCanvasImg","UPLOAD_URL","formData","FormData","append","target","files","fetch","body","json","secure_url","file","AddImg","onSelectImg","updateState","onAddimg","onAddImg","isForBoard","index","isForMenu","src","alt","onChange","marginBottom","AddBoard","state","text","handleValueChange","value","setState","onSubmit","preventDefault","saveBoard","placeholder","marginTop","templates","require","_BoardApp","isAddBoardShown","isImgForBoard","onShowModal","onCloseModal","onSaveBoard","addBoard","loadBoards","template","mapDispatchToProps","BoardApp","connect","boardReducer","MenuColorModal","onSelectColor","color","onAddColor","Element","Scroll","_SideMenu","isChooseImg","isChooseBgc","idGraphShown","onChangeBoardImg","onChangeBoardColor","isChooseColor","onBackToMenu","onToggleMenu","onChangeImg","onChangeColor","onOpenGraph","history","push","removeAllActivity","Swal","fire","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","onRemoveBoard","member","Avatar","userName","substring","toUpperCase","height","overflow","overflowX","paddingLeft","activity","getAvatar","SideMenuWithRouter","withRouter","SideMenu","currBoard","get","entityType","entityId","entities","entity","post","newEntity","_makeId","_save","put","updatedEntity","idx","findIndex","splice","remove","JSON","parse","localStorage","getItem","Promise","resolve","setItem","stringify","userService","login","logout","signup","getById","userId","storageService","loginAsGuest","userCred","BoardInvite","allMembers","useState","anchorEl","setAnchorEl","handleClick","event","currentTarget","onSelectMember","members","filter","margin","Menu","keepMounted","open","Boolean","MenuItem","BoardHeader","isMenuShow","isInviteMembersShown","toggleMenu","menuState","handleFocusOut","onToggleInviteModal","val","removeMemberFromBoard","memberId","memberInBoard","marginLeft","alignSelf","initialValue","save","inputClass","labelClass","AvatarGroup","max","marginRight","Container","styled","div","isDragging","CardPreview","calcProgress","draggableId","provided","snapshot","draggableProps","dragHandleProps","ref","innerRef","labels","label","checklist","youtube","AddText","onAdd","onRemoveTextEditor","isAddType","autoFocus","SimpleMenu","onRemove","isGroupColor","onShowColorTogglle","isDeleteGroup","onShowDeleteTogglle","onAddCard","onGroupColorChange","handleClose","Button","fontWeight","minWidth","aria-controls","aria-haspopup","hex","colors","triangle","isDraggingOver","_CardList","isAddCard","onRemoveGroup","isDelete","isColor","groupTitle","Array","from","todos","tasks","doneTasks","task","isDone","trim","widte","paddingRight","droppableId","droppableProps","CardList","Canvas","canvasRef","useRef","contextRef","isDrawing","setIsDrawing","setColor","window","addEventListener","passive","useEffect","canvas","current","context","getContext","lineCap","strokeStyle","lineWidth","drawImg","finishDrawing","closePath","closeCanvas","addCanvasToCard","toDataURL","img","Image","onload","drawImage","crossOrigin","nativeEvent","onMouseDown","offsetX","offsetY","beginPath","moveTo","onMouseUp","onMouseMove","lineTo","stroke","onTouchStart","touches","clientX","clientY","onTouchEnd","onTouchMove","ColorModal","onClickColor","onSaveLabels","TodoPreview","todo","onInputChange","onCheckboxChange","bool","prevState","updateCheckbox","action","onRemoveTodo","_ChecklistPreview","isTodoEditShown","newTodo","progressbar","todoId","calculateProgress","todoIdx","onUpdateChecklists","onHandleInput","updateLocalChecklist","updTodo","updtTitle","totalTodos","toFixed","onFocusOut","inputWidth","inputHeight","labelFontSize","inputFontWeight","labelClassName","removeChecklist","htmlFor","fontSize","display","padding","ChecklistPreview","Checklist","saveChecklist","updateLocalCard","ChecklistAdd","handleChange","addNewChecklist","CardInvite","_CardDetails","isAddImgModalShown","isDescriptionEdit","isTimeEdit","isLabelesEdit","isChecklistEdit","isAddColorModalShown","isYoutubeShown","isCanvas","onRemoveYoutube","onRmoveModal","saveCard","onHandleRemove","currUser","onRemoveCard","onRemoveImg","newBoard","cardIdx","doneEdit","onRemoveDuedate","dueDate","handleChangeDuedate","onRemoveLabel","labelIdx","indexOf","onOpenDuedate","onOpenLabelModal","openChecklistEditor","handleChangeBGColor","onOpenColorModal","onModalClick","removeMemberFromCard","memberInCard","youtubeFunc","LinearProgress","TextareaAutosize","rowsMax","aria-label","defaultValue","border","selected","showTimeSelect","dateFormat","inputClassName","CardDetails","userReducer","loggedInUser","_BoardDetails","isDetailsShown","isAddGroup","onEditGroup","newboard","groupIdx","onDragEnd","destination","source","columns","start","finish","startTaskIds","shiftedTask","newStart","finishtaskIds","newFinish","newGroups","startGroupIdx","finishGroupIdx","newState","newTaskIds","newColumn","newCards","params","updateBoardFromSocket","cleanBoard","minHeight","BoardDetails","MembersChart","memberNumber","userToShow","num","datasetsForLine","fillColor","strokeColor","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","lineData","datasets","options","scaleShowGridLines","scaleGridLineColor","scaleGridLineWidth","scaleShowHorizontalLines","scaleShowVerticalLines","bezierCurve","bezierCurveTension","pointDot","pointDotRadius","pointDotStrokeWidth","pointHitDetectionRadius","datasetStroke","datasetStrokeWidth","datasetFill","legendTemplate","styles","graphContainer","_GraphDetails","data1","data2","data3","isChartsOn","setTimeout","backToBoard","hoverBackgroundColor","path","component","_Login","msg","loginCred","password","loginHandleChange","name","doLogin","userCreds","TextField","variant","autoComplete","location","assign","Login","_Submit","signupCred","signupHandleChange","doSignup","signupCreds","Submit","_NavBar","_isMounted","isLogged","isSignIn","isModalShow","isIn","onIsLogged","onIsSubmit","onLogOut","NavBar","App","routes","route","exact","initialState","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b716030a.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function BoardPreview({ board }) {\r\n  return (\r\n    <div>\r\n     \r\n      <Link to={`/board/${board._id}`}>\r\n        <div\r\n          style={\r\n            (board.style && board.style.bgImg)\r\n              ? {\r\n                backgroundImage: `url(${board.style && board.style.bgImg})`,\r\n                backgroundSize: \"cover\",\r\n                backgroundRepeat: \"no-repeat\",\r\n              }\r\n              : {\r\n                backgroundColor: `${board.style.bgColor ? board.style.bgColor : \"green\"\r\n                  }`,\r\n              }\r\n          }\r\n          className=\"board-preview flex align-center\"\r\n        >\r\n      <h3 style={{ width: '100%'}}>{board.title}</h3>\r\n\r\n\r\n        </div>\r\n      </Link>\r\n      \r\n    </div>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport BoardPreview from './BoardPreview';\r\n\r\n\r\n\r\nexport function BoardList({ boards, onAddBoard }) {\r\n  return <div>\r\n\r\n    <div dir=\"rtl\" className=\"board-list grid\">\r\n      {boards.map(board => <BoardPreview board={board} key={board._id} />)}\r\n      <div onClick={onAddBoard} style={{ backgroundColor: \"none\", cursor: \"pointer\" }} className=\"board-preview grid \">\r\n        <h3 style={{ paddingTop: '10px' }}>Create new board</h3 >\r\n      </div>\r\n    </div>\r\n  </div>\r\n}\r\n","import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        // if (err.response && err.response.status === 401) {\r\n        //     window.location.assign('/#/login');\r\n        // }\r\n        throw err;\r\n    }\r\n}","import httpService from './httpService';\r\n\r\n\r\nexport const boardService = {\r\n  query,\r\n  loadBoard,\r\n  removeBoard,\r\n  update,\r\n  getCardById,\r\n  create,\r\n  makeId,\r\n  addActivity,\r\n  removeActivities\r\n};\r\n\r\n\r\n\r\nfunction query(filterBy) {\r\n  return httpService.get(`board`);\r\n}\r\nfunction loadBoard(boardId) {\r\n  return httpService.get(`board/${boardId}`)\r\n}\r\nfunction update(board) {\r\n  return httpService.put(`board/${board._id}`, board);\r\n}\r\nfunction removeBoard(boardId) {\r\n  return httpService.delete(`board/${boardId}`);\r\n}\r\nfunction create(txt, imgUrl) {\r\n  const board = _createBoard(txt, imgUrl)\r\n  return httpService.post(`board`, board);\r\n}\r\nfunction _createBoard(txt, imgUrl) {\r\n  return {\r\n    title: txt,\r\n    style: { bgImg: imgUrl },\r\n    groups: [{\r\n      id: 'g' + makeId(),\r\n      title: \"New List\",\r\n      cards: [\r\n        {\r\n          id: 'c' + makeId(),\r\n          title: \"New Card\",\r\n          description: \"Add your description...\",\r\n        }\r\n      ]\r\n    }\r\n    ]\r\n  }\r\n}\r\nfunction getCardById(board, groupId, cardId) {\r\n  const group = board.groups.find(group => group.id === groupId)\r\n  return group.cards.find(card => card.id === cardId)\r\n}\r\nfunction addActivity(board, ActivityType, changeIn, user) {\r\n  if (!board.activities) {\r\n    board.activities = []\r\n  }\r\n  const activities = board.activities\r\n  activities.unshift({\r\n    id: 'a' + makeId(),\r\n    title: ActivityType,\r\n    createdAt: new Date(),\r\n    propertyTitle: changeIn.title,\r\n    byMember: user\r\n  })\r\n  return board\r\n}\r\nfunction removeActivities(board) {\r\n  board.activities = []\r\n  return board\r\n}\r\nfunction makeId(length = 5) {\r\n  var txt = '';\r\n  var possible = '0123456789abcdefgABCDEFG';\r\n  for (var i = 0; i < length; i++) {\r\n    txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n  return txt;\r\n}","import io from 'socket.io-client';\r\n\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030';\r\n\r\nlet socket;\r\n\r\nexport default {\r\n  setup,\r\n  terminate,\r\n  on,\r\n  off,\r\n  emit,\r\n  broadcastEmit\r\n};\r\n\r\nfunction setup() {\r\n  socket = io(BASE_URL);\r\n}\r\n\r\nfunction terminate() {\r\n  socket = null;\r\n}\r\n\r\nfunction on(eventName, cb) {\r\n  socket.on(eventName, cb);\r\n}\r\n\r\nfunction off(eventName, cb) {\r\n  socket.off(eventName, cb);\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n  socket.emit(eventName, data);\r\n}\r\n\r\nfunction broadcastEmit(eventName, data) {\r\n  socket.broadcast.emit(eventName, data);\r\n}\r\n","import { boardService } from \"../../services/boardService\";\r\nimport socketService from \"../../services/socketService\";\r\n\r\nexport function loadBoards() {\r\n  return async (dispatch) => {\r\n    try {\r\n      const boards = await boardService.query();\r\n      dispatch({ type: \"SET_BOARDS\", boards });\r\n    } catch (err) {\r\n      console.log(`ERROR: while loading boards`);\r\n    }\r\n  };\r\n}\r\nexport function loadBoard(boardId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const board = await boardService.loadBoard(boardId);\r\n      dispatch({ type: \"SET_BOARD\", board });\r\n    } catch (err) {\r\n      console.log(`ERROR: while loadding board`);\r\n    }\r\n  };\r\n}\r\nexport function removeBoard(id) {\r\n  return async (dispatch) => {\r\n    try {\r\n      await boardService.removeBoard(id);\r\n      dispatch({ type: \"REMOVE_BOARD\", id });\r\n    } catch (err) {\r\n      console.log(`ERROR: while remove board`);\r\n    }\r\n  };\r\n}\r\nexport function addBoard(txt, imgUrl) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const board = await boardService.create(txt, imgUrl);\r\n      dispatch({ type: \"ADD_BOARD\", board });\r\n    } catch (err) {\r\n      console.log(`ERROR: while adding board`);\r\n    }\r\n  };\r\n}\r\nexport function updateBoard(board) {\r\n  //I'm updating the board\r\n  return async (dispatch) => {\r\n    dispatch({ type: \"UPDATE_BOARD\", board });\r\n    try {\r\n      await boardService.update(board);\r\n      socketService.emit(\"update board\", board);\r\n    } catch (err) {\r\n      console.log(`ERROR: while update board`);\r\n    }\r\n  };\r\n}\r\nexport function updateBoardFromSocket(board) {\r\n  //Someone else updated the board\r\n  return (dispatch) => {\r\n    dispatch({ type: \"UPDATE_BOARD\", board });\r\n  };\r\n}\r\n\r\nexport function cleanBoard() {\r\n  return (dispatch) => {\r\n    dispatch({ type: \"CLEAN_BOARD\", value: null });\r\n  };\r\n}\r\n","import React from \"react\";\r\n\r\nexport class Modal extends React.Component {\r\n  render() {\r\n    const { children } = this.props;\r\n\r\n    return (\r\n      <div className=\"modal-wrapper\" onClick={this.props.onClose}>\r\n        <div\r\n          className={` ${\r\n            !this.props.isForLog ? \"modal-content\" : \"login-modal\"\r\n          } flex column  align-center`}\r\n          onClick={(ev) => ev.stopPropagation()}\r\n        >\r\n          {children}\r\n\r\n          {this.props.isForLog && this.props.onLoginHere && (\r\n            <p>\r\n              Already have an account?{\" \"}\r\n              <span onClick={this.props.onLoginHere}>login here</span>\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// import { Image } from 'cloudinary-react';\r\n\r\nexport const cloudinaryService = {\r\n    uploadImg,\r\n    dataURLtoFile,\r\n    uploadCanvasImg\r\n}\r\n\r\nasync function uploadImg(ev) {\r\n    const CLOUD_NAME = \"cloudinary-img\"\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', ev.target.files[0])\r\n    formData.append('upload_preset', 'ml_default');\r\n    try {\r\n        const res = await fetch(UPLOAD_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        const data = await res.json()\r\n        return data.secure_url\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n}\r\n function dataURLtoFile(dataurl, filename) {\r\n \r\n    var arr = dataurl.split(','),\r\n        mime = arr[0].match(/:(.*?);/)[1],\r\n        bstr = atob(arr[1]), \r\n        n = bstr.length, \r\n        u8arr = new Uint8Array(n);\r\n        \r\n    while(n--){\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    \r\n    return  new File([u8arr],filename,{type:mime});\r\n}\r\n\r\nasync function uploadCanvasImg(file) {\r\n    const CLOUD_NAME = \"cloudinary-img\"\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file)\r\n    formData.append('upload_preset', 'ml_default');\r\n    try {\r\n        const res = await fetch(UPLOAD_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        const data = await res.json()\r\n        return data.secure_url\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n}\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\n\r\n\r\n\r\n\r\n\r\nimport { cloudinaryService } from '../services/cloudinaryService'\r\n\r\nexport class AddImg extends Component {\r\n\r\n    onSelectImg = (imgUrl) => {\r\n        if (this.props.card) {\r\n            this.props.card.imgUrl = imgUrl\r\n            this.props.updateState('isAddImgModalShown', false)\r\n            return this.props.card\r\n        }\r\n        else {\r\n            this.props.onAddimg(imgUrl)\r\n\r\n        }\r\n\r\n    }\r\n    onAddImg = async (ev) => {\r\n        const imgUrl = await cloudinaryService.uploadImg(ev)\r\n        this.onSelectImg(imgUrl)\r\n    }\r\n\r\n    render() {\r\n        const imgUrls = [\r\n            'https://res.cloudinary.com/dsfnyykw9/image/upload/v1600679540/markus-spiske-1LLh8k2_YFk-unsplash_isgzdk.jpg',\r\n            'https://res.cloudinary.com/cloudinary-img/image/upload/v1600352679/Taskit/tony-yeung-Exq6e9gH4Ag-unsplash_e7ltjx.jpg',\r\n            'https://res.cloudinary.com/cloudinary-img/image/upload/v1600352678/Taskit/seth-doyle--AFVBe7VGqQ-unsplash_xjlclq.jpg',\r\n            'https://res.cloudinary.com/dsfnyykw9/image/upload/v1600675580/pawel-czerwinski-3k9PGKWt7ik-unsplash_n9aon0.jpg',\r\n            'https://res.cloudinary.com/dsfnyykw9/image/upload/v1600670064/you-x-ventures-Oalh2MojUuk-unsplash_vl1wmw.jpg',\r\n            'https://res.cloudinary.com/dsfnyykw9/image/upload/v1600670112/scott-graham-5fNmWej4tAA-unsplash_wrvxnx.jpg',\r\n            'https://res.cloudinary.com/dsfnyykw9/image/upload/v1600670086/giusy-iordache-ZtqDLEkJPcc-unsplash_ywibhv.jpg',\r\n            'https://res.cloudinary.com/cloudinary-img/image/upload/v1601453622/Taskit/rowan-heuvel-U6t80TWJ1DM-unsplash_zswnsv.jpg',\r\n            'https://res.cloudinary.com/cloudinary-img/image/upload/v1601453613/Taskit/simon-berger-twukN12EN7c-unsplash_cq4gf9.jpg',\r\n            'https://res.cloudinary.com/cloudinary-img/image/upload/v1601453610/Taskit/paul-gilmore-hKOPVtGQZ4o-unsplash_awqz0q.jpg',\r\n            'https://res.cloudinary.com/cloudinary-img/image/upload/v1601453608/Taskit/frank-mckenna-eXHeq48Z-Q4-unsplash_gqwseh.jpg',\r\n            'https://res.cloudinary.com/cloudinary-img/image/upload/v1601457901/Taskit/sebastien-gabriel-XOrFfUPUfeU-unsplash_i1owuz.jpg'\r\n        ]\r\n        return (\r\n            <div className=\"add-img-page\">\r\n                {!this.props.isForBoard && <div className=\"empty-modal\" onClick={() => this.props.updateState('isAddImgModalShown', false)}></div>}\r\n\r\n                <div className={(this.props.isForBoard) ? '' : 'add-img-modal flex column'}>\r\n                <div className='add-private-img'>\r\n                        {imgUrls.map((imgUrl, index) => <img onClick={() => this.onSelectImg(imgUrl)} className={(this.props.isForMenu) ? 'bg-img-preview' :'img-preview' } key={index} src={imgUrl} alt=\"Loading\" />)}\r\n\r\n                    </div>\r\n                    <input onChange={this.onAddImg} className=\"self-center\" style={{ width: '180px',marginBottom:'5px' }} type=\"file\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { AddImg } from './AddImg';\r\n\r\nexport class AddBoard extends React.Component {\r\n\r\n    state = {\r\n        text: '',\r\n        imgUrl: ''\r\n    }\r\n    handleValueChange = (ev) => {\r\n        const text = ev.target.value;\r\n        this.setState({ text })\r\n    }\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault();\r\n        this.props.saveBoard(this.state.text, this.state.imgUrl)\r\n        this.setState({ text: '', imgUrl: '' })\r\n    }\r\n\r\n    onAddimg = (imgUrl) => {\r\n        this.setState({ imgUrl: imgUrl })\r\n\r\n    }\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <form className=\"add-board-form flex column\" onSubmit={this.onSubmit}>\r\n                <input className=\"board-name-input\" placeholder=\" Enter Board name\"\r\n                        type=\"text\"\r\n                        onChange={this.handleValueChange}\r\n                        value={this.state.text}\r\n                    />\r\n                    <div><AddImg isForBoard={this.props.isForBoard} onAddimg={this.onAddimg} /></div>\r\n                    <div className=\"flex\">\r\n                    <button className=\"btn\" style={{marginTop:'10px'}} >Add Board</button>\r\n                        {this.state.imgUrl && <img className=\"img-preview\" src={this.state.imgUrl} alt=\"Loading\" />}\r\n                    </div>\r\n\r\n                </form>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { BoardList } from '../cmps/BoardList'\r\nimport { loadBoards, addBoard } from '../store/actions/boardActions'\r\nimport { Modal } from '../cmps/Modal'\r\nimport { AddBoard } from '../cmps/AddBoard'\r\n\r\nimport BoardPreview from '../cmps/BoardPreview'\r\n\r\nconst templates = require('../services/templateBoards.json')\r\n\r\nclass _BoardApp extends Component {\r\n\r\n    state = {\r\n        isAddBoardShown: false,\r\n        isImgForBoard: false,\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.loadBoards()\r\n    }\r\n\r\n    onShowModal = () => {\r\n        this.setState({ isAddBoardShown: true, isImgForBoard: true })\r\n    }\r\n    onCloseModal = () => {\r\n        this.setState({ isAddBoardShown: false, isImgForBoard: false })\r\n    }\r\n\r\n    onSaveBoard = (txt, imgUrl) => {\r\n        this.props.addBoard(txt, imgUrl)\r\n        this.onCloseModal()\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const { boards } = this.props\r\n        return (\r\n            <div className=\"board-app flex column\">\r\n\r\n\r\n                <div className=\"ba-boards flex align-center fiftyPh hundredPw space-evenly \">\r\n                    <div className=\" h1-div thirdyPw flex hundredPh \"><h1>Your Boards:</h1></div>\r\n\r\n                    <div className=\"seventyPw flex justify-center\"><BoardList boards={boards} onAddBoard={this.onShowModal} />\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div className=\"ba-templates flex align-center fiftyPh hundredPw space-evenly\">\r\n                    <div className=\" h1-div thirdyPw flex hundredPh\"><h1 >Template Boards:</h1></div>\r\n                <div className=\"seventyPw flex justify-center\">\r\n                    <div dir=\"rtl\" className=\" board-list grid templates\">\r\n                        {/* board-list grid seventyPw */}\r\n                        {templates.map(template => <BoardPreview board={template} key={template._id} />)}\r\n                    </div>\r\n                    </div>\r\n                </div>\r\n                    {this.state.isAddBoardShown && <Modal onClose={this.onCloseModal}\r\n                        children={<AddBoard isForBoard={this.state.isImgForBoard} saveBoard={this.onSaveBoard} onClose={this.onCloseModal} />} />}\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    addBoard\r\n}\r\n\r\nexport const BoardApp = connect(mapStateToProps, mapDispatchToProps)(_BoardApp)\r\n\r\n\r\n","import React from \"react\";\r\n\r\nexport class MenuColorModal extends React.Component {\r\n    onSelectColor = (color, ev) => {\r\n        ev.stopPropagation()\r\n        this.props.onAddColor(color)\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        const colors = [\r\n            '#FEEDCC',\r\n            '#DDDEAD',\r\n            '#A9D7A9',\r\n            '#51C2B1',\r\n            '#24A39A',\r\n            '#679CB4',\r\n            '#A67376',\r\n            '#FE797B',\r\n            '#FFB750',\r\n            '#FFEA56',\r\n            '#8FE968',\r\n            '#36CEDC',\r\n            '#F3F3F6',\r\n        ]\r\n        return (\r\n            <div className=\"board-menu-color-container\">\r\n\r\n                {colors.map(color => <span onClick={(ev) => this.onSelectColor(color, ev)} className=\"color-preview\" style={{ backgroundColor: color }} />)}\r\n            </div>\r\n\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport Swal from 'sweetalert2'\r\n// import { BsListNested, BsCardHeading } from \"react-icons/bs\";\r\nimport { Avatar } from '@material-ui/core';\r\nimport { VscChromeClose } from \"react-icons/vsc\";\r\nimport { IoIosArrowBack } from \"react-icons/io\";\r\nimport { connect } from \"react-redux\";\r\nimport { MdColorLens } from \"react-icons/md\";\r\nimport { AiOutlineMenu } from \"react-icons/ai\";\r\nimport { GoGraph } from \"react-icons/go\";\r\n\r\n\r\n// import { createBrowserHistory } from 'history';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { AddImg } from './AddImg';\r\nimport { MenuColorModal } from './MenuColorModal'\r\nimport { updateBoard } from \"../store/actions/boardActions\";\r\nimport { FaFileImage, FaTrashAlt } from \"react-icons/fa\";\r\nimport { boardService } from '../services/boardService'\r\n\r\nimport Scroll from 'react-scroll';\r\nvar Element = Scroll.Element;\r\n\r\nexport class _SideMenu extends Component {\r\n\r\n    state = {\r\n        isChooseImg: false,\r\n        isChooseBgc: false,\r\n        idGraphShown: false,\r\n    }\r\n\r\n    onChangeBoardImg = () => {\r\n        this.setState({ isChooseImg: true })\r\n    }\r\n    onChangeBoardColor = () => {\r\n        this.setState({ isChooseColor: true })\r\n    }\r\n    onBackToMenu = () => {\r\n\r\n        if (!this.state.isChooseImg && !this.state.isChooseColor) {\r\n            this.props.onToggleMenu()\r\n            return\r\n        }\r\n        this.setState({ isChooseImg: false, isChooseColor: false })\r\n    }\r\n    onChangeImg = (imgUrl) => {\r\n        const board = this.props.board\r\n        board.style.bgImg = imgUrl\r\n        board.style.bgColor = ''\r\n        this.props.updateBoard(board)\r\n\r\n    }\r\n    onChangeColor = (color) => {\r\n        const board = this.props.board\r\n        board.style.bgColor = color\r\n        board.style.bgImg = ''\r\n        this.props.updateBoard(board)\r\n    }\r\n    onOpenGraph = () => {\r\n        this.props.onToggleMenu()\r\n        this.props.history.push(`/graph/${this.props.board._id}`)\r\n    }\r\n    removeAllActivity = () => {\r\n        Swal.fire({\r\n            title: 'Are you sure?',\r\n            text: \"You won't be able to revert the activities\",\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: 'rgb(221 51 51 / 78%)',\r\n            cancelButtonColor: 'rgb(48 133 214 / 83%)',\r\n            confirmButtonText: 'Yes, delete all'\r\n        }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                const board = boardService.removeActivities(this.props.board)\r\n                this.props.updateBoard(board)\r\n            }\r\n        })\r\n    }\r\n    getAvatar(member) {\r\n        if (member && member.imgUrl) {\r\n            return <Avatar key={member._id} src={member.imgUrl} className=\"avatar\" />\r\n        }\r\n        if (member) {\r\n            return <Avatar key={member._id} className=\"avatar\">{member.userName.substring(0, 1).toUpperCase()}{member.userName.substring(1, 2).toUpperCase()}</Avatar>\r\n        }\r\n        return <Avatar className=\"avatar\" />\r\n    }\r\n    onRemoveBoard = async () => {\r\n        const answer = await Swal.fire({\r\n            title: 'Are you sure?',\r\n            text: \"You won't be able to revert the board\",\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: 'rgb(221 51 51 / 78%)',\r\n            cancelButtonColor: 'rgb(48 133 214 / 83%)',\r\n            confirmButtonText: 'Yes, delete the Board'\r\n        })\r\n        if (answer.isConfirmed) {\r\n            await boardService.removeBoard(this.props.board._id)\r\n            this.props.history.push('/board')\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { activities } = this.props.board\r\n        return (\r\n            <div className=\"side-menu\" >\r\n                <Element style={{\r\n                    height: 'calc(100vh - 60px)',\r\n                    width: '100%',\r\n                    overflow: 'scroll',\r\n                    overflowX: 'hidden',\r\n                    paddingLeft: '5px'\r\n                }}>\r\n                    <div className=\"menu-header flex space-between\">\r\n                        <IoIosArrowBack onClick={this.onBackToMenu} />\r\n                        <span style={{ color: 'black' }}>Menu</span>\r\n                        <VscChromeClose onClick={this.props.onToggleMenu} className=\"close-modal-btn\" />\r\n                    </div>\r\n\r\n                    <hr />\r\n                    {this.state.isChooseImg && <AddImg isForBoard={true} isForMenu={true} onAddimg={this.onChangeImg} />}\r\n                    {this.state.isChooseColor && <MenuColorModal onAddColor={this.onChangeColor} />}\r\n                    {!this.state.isChooseImg && !this.state.isChooseColor && <div>\r\n                        <div className=\"menu-actions flex column\">\r\n                            {/* <div className=\"menu-action flex\" ><BsCardHeading /><span>Change Name</span></div> */}\r\n                            <div className=\"menu-action flex\" onClick={this.onChangeBoardImg}><FaFileImage /><span>Change board Img</span></div>\r\n                            <div className=\"menu-action flex\" onClick={this.onChangeBoardColor}><MdColorLens /><span>Change board color</span></div>\r\n                            <div className=\"menu-action flex\" onClick={this.onRemoveBoard}><FaTrashAlt /><span>Delete Board</span></div>\r\n\r\n                        </div>\r\n                        <hr />\r\n                        <div className=\"menu-action flex\" style={{paddingLeft:'5px'}} onClick={this.onOpenGraph}><GoGraph /><span>Graph</span></div>\r\n                        <hr />\r\n                        <div className=\"activity-log flex align-center space-between\">\r\n                            <div className=\"flex align-center\">\r\n                                <AiOutlineMenu />\r\n                                <span> Activity</span>\r\n                            </div>\r\n                            <p className=\"delete-activities\" onClick={this.removeAllActivity}>Delete all</p>\r\n                        </div>\r\n                        {activities && <div>\r\n                            <ul className=\"side-menu-list\">\r\n                                {activities.map(activity =>\r\n                                    <li key={activity.id} className=\"one-activity flex\">\r\n\r\n                                        <span className=\"user-avatar\">{this.getAvatar(activity.byMember)}</span>\r\n\r\n                                        <div className=\"one-activity flex column\">\r\n\r\n                                            <p>\r\n                                                <span className=\"user-name\">{activity.byMember ? activity.byMember.userName : 'Guest'}</span>\r\n                                                <span className=\"action-name\">{' ' + activity.title}</span>\r\n                                            </p>\r\n                                            <p>Card: {activity.propertyTitle}</p>\r\n                                        </div>\r\n                                    </li>\r\n                                )}\r\n                            </ul>\r\n                        </div>\r\n                        }\r\n                    </div>}\r\n                </Element>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        board: state.boardReducer.currBoard,\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateBoard\r\n};\r\n\r\nconst SideMenuWithRouter = withRouter(_SideMenu)\r\n\r\nexport const SideMenu = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(SideMenuWithRouter);\r\n\r\n\r\n","\r\n\r\nexport default {\r\n    query,\r\n    get,\r\n    post,\r\n    put,\r\n    remove,\r\n}\r\n\r\nfunction query(entityType) {\r\n    var entities = JSON.parse(localStorage.getItem(entityType)) || []\r\n    return Promise.resolve(entities);\r\n}\r\n\r\n\r\nfunction get(entityType, entityId) {\r\n    return query(entityType)\r\n        .then(entities => entities.find(entity => entity._id === entityId))\r\n}\r\nfunction post(entityType, newEntity) {\r\n    newEntity._id = _makeId()\r\n    return query(entityType)\r\n        .then(entities => {\r\n            entities.push(newEntity);\r\n            _save(entityType, entities)\r\n            return newEntity;\r\n        })\r\n}\r\n\r\n\r\n\r\nfunction put(entityType, updatedEntity) {\r\n    return query(entityType)\r\n        .then(entities => {\r\n            const idx = entities.findIndex(entity => entity._id === updatedEntity._id);\r\n            entities.splice(idx, 1, updatedEntity)\r\n            _save(entityType, entities)\r\n            return updatedEntity;\r\n        })\r\n}\r\n\r\nfunction remove(entityType, entityId) {\r\n    return query(entityType)\r\n        .then(entities => {\r\n            const idx = entities.findIndex(entity => entity._id === entityId);\r\n            entities.splice(idx, 1)\r\n            _save(entityType, entities)\r\n        })\r\n}\r\n\r\n\r\nfunction _save(entityType, entities) {\r\n    localStorage.setItem(entityType, JSON.stringify(entities))\r\n}\r\n\r\nfunction _makeId(length = 5) {\r\n    var text = \"\";\r\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n    for (var i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return text;\r\n}","import httpService from \"./httpService\";\r\nimport storageService from './asyncStorageService'\r\n\r\nexport const userService ={\r\n  login,\r\n  logout,\r\n  signup,\r\n  getById,\r\n  update,\r\n  loginAsGuest\r\n};\r\n\r\nasync function login(userCred) {\r\n  const user = await httpService.post('auth/login', userCred)\r\n  return _handleLogin(user)\r\n}\r\nasync function signup(userCred) {\r\n  const user = await httpService.post('auth/signup', userCred)\r\n  return _handleLogin(user)\r\n}\r\nasync function logout() {\r\n  await httpService.post('auth/logout');\r\n}\r\nfunction _handleLogin(user) {\r\n  return user;\r\n}\r\nfunction getById(userId) {\r\n  return httpService.get(`user/${userId}`);\r\n}\r\n\r\nfunction update(user) {\r\n  return storageService.put('user', user)\r\n}\r\n\r\nfunction loginAsGuest(){\r\n    const user = { _id: 'u104', userName: 'Guest'}\r\n    return  user \r\n       \r\n}\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { FaUserCircle } from \"react-icons/fa\";\r\nimport { Avatar } from '@material-ui/core';\r\n\r\nimport { userService } from '../services/userService'\r\n\r\nexport function BoardInvite({ board, updateBoard }) {\r\n\r\n    const allMembers = [\r\n        {\r\n            _id: \"5f6f020e486616919e1f0de3\",\r\n            userName: \"Arik Einav\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1600864700/Taskit/erik_lnajh5.png\"\r\n        }, {\r\n            _id: \"5f6f0220486616919e1f13c2\",\r\n            userName: \"Shlomi Koplianski\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1600864700/Taskit/shlomi_rujmqc.png\"\r\n        }, {\r\n            _id: \"5f6f01f9486616919e1f0682\",\r\n            userName: \"Shahar Sadof\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1600864700/Taskit/shahar_wyjntk.png\"\r\n        }, {\r\n            _id: \"5f6f374f81cc744a0002589c\",\r\n            userName: \"Meital Lazarovich\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1601122561/Taskit/meital_xr42uc.png\"\r\n        }, {\r\n            _id: \"5f6f37c181cc744a0002589d\",\r\n            userName: \"Yaron Biton\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1601123470/Taskit/Yaron_z1uuw2.png\"\r\n        },\r\n    ]\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    }\r\n    const onSelectMember = async (userId) => {\r\n        setAnchorEl(null);\r\n        if (board.members) {\r\n            const memberInBoard = board.members.filter(member => member._id === userId)\r\n            if (memberInBoard.length > 0) return\r\n            const user = await userService.getById(userId)\r\n            board.members.push(user)\r\n        } else {\r\n            const user = await userService.getById(userId)\r\n            board.members = [user]\r\n        }\r\n        updateBoard(board)\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"invite-modal\">\r\n             {/* <div onClick={handleClick} className=\"board-header-invite\"> */}\r\n             <button onClick={handleClick}  className=\"btn invite-btn\"><FaUserCircle style={{ margin: \"0px 5px -2px\" }} />Invite</button>\r\n                <button onClick={handleClick} className=\"btn invite-btn-small-screen\"><FaUserCircle /></button>\r\n            {/* </div> */}\r\n            \r\n            <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleClose}\r\n            >\r\n                {allMembers &&\r\n                    allMembers.map(member =>\r\n                        <MenuItem key={member._id} className=\"user-in-list\">\r\n                            <div className=\"members flex\" onClick={() => onSelectMember(member._id)}>\r\n                                <Avatar src={member.imgUrl} alt=\"img\" className=\"user-img\" />\r\n                                <p className=\"user-name\">{member.userName}</p>\r\n                            </div>\r\n                        </MenuItem>)\r\n                }\r\n            </Menu>\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react'\r\n// import { FaUserCircle } from \"react-icons/fa\";\r\nimport { Avatar } from '@material-ui/core';\r\nimport { AvatarGroup } from '@material-ui/lab';\r\nimport { AiOutlineMenu } from \"react-icons/ai\";\r\n\r\nimport { SideMenu } from './SideBarMenu'\r\nimport EditableLabel from 'react-editable-label'\r\nimport { BoardInvite } from './BoardInvite'\r\n\r\nexport class BoardHeader extends Component {\r\n\r\n    state = {\r\n        filterBy: '',\r\n        isMenuShow: false,\r\n        isInviteMembersShown: false\r\n    }\r\n    toggleMenu = () => {\r\n        let menuState = !this.state.isMenuShow\r\n        this.setState({ isMenuShow: menuState })\r\n    }\r\n    handleFocusOut = (title) => {\r\n        const board = this.props.board\r\n        board.title = title\r\n        this.props.updateBoard(board)\r\n    }\r\n    onToggleInviteModal = (val) => {\r\n        this.setState({ isInviteMembersShown: val })\r\n    }\r\n    getAvatar(member) {\r\n        if (member && member.imgUrl) {\r\n            return <Avatar key={member._id} src={member.imgUrl} className=\"avatar\" onClick={(ev) => this.removeMemberFromBoard(member._id, ev)}/>\r\n        }\r\n        if (member) {\r\n            return <Avatar key={member._id} className=\"avatar\" onClick={(ev) => this.removeMemberFromBoard(member._id, ev)}>{member.userName.substring(0, 1).toUpperCase()}{member.userName.substring(1, 2).toUpperCase()}</Avatar>\r\n        }\r\n        return <Avatar className=\"avatar\" onClick={(ev) => this.removeMemberFromBoard(member._id, ev)}/>\r\n    }\r\n    removeMemberFromBoard = (memberId, ev) => {\r\n        ev.stopPropagation()\r\n        const board = this.props.board\r\n        const memberInBoard = board.members.filter(member => member._id !== memberId)\r\n        board.members = memberInBoard\r\n        this.props.updateBoard(this.props.board)\r\n    }\r\n\r\n    render() {\r\n        const { board } = this.props\r\n        \r\n\r\n\r\n        return (\r\n            <div className=\"board-header flex space-between\">\r\n                <div className=\"name-and-member flex\">\r\n                <div style={{ marginLeft: \"10px\", alignSelf: \"center\",color:\"white\" }}>  \r\n                            <EditableLabel \r\n                           \r\n                         initialValue={board.title}\r\n                         save={value => {this.handleFocusOut(value)}}\r\n                         inputClass='title-input'\r\n                         labelClass='header-label-class'\r\n                         \r\n                            />\r\n                    </div>\r\n\r\n                    {board.members &&\r\n                        <section className=\"avatar-members flex\">\r\n                            <AvatarGroup max={4}>\r\n                                {board.members.map(member => this.getAvatar(member))}\r\n                            </AvatarGroup>\r\n                        </section>}\r\n                </div>\r\n                <div className=\"flex\">\r\n\r\n                    <BoardInvite board={board} updateBoard={this.props.updateBoard} />\r\n\r\n                    <button className=\"btn board-header-btn menu flex\" onClick={this.toggleMenu}><AiOutlineMenu style={{ margin: \"0px 5px -2px\" }} />Menu</button>\r\n\r\n                    <button className=\"btn board-header-btn-small-screen menu\" onClick={this.toggleMenu}><AiOutlineMenu style={{ marginRight: \"5px\" }} /></button>\r\n                </div>\r\n                {this.state.isMenuShow && <SideMenu onToggleMenu={this.toggleMenu} />}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport { Draggable } from 'react-beautiful-dnd'\r\nimport styled from 'styled-components'\r\nimport NaturalDragAnimation from 'natural-drag-animation-rbdnd';\r\nimport ReactPlayer from 'react-player/youtube'\r\nimport { RiTaskLine } from \"react-icons/ri\";\r\n\r\n\r\n\r\nconst Container = styled.div`\r\nbackground-color: ${props => (props.isDragging ? '#B5B5B5' : '#fff')};\r\n`;\r\n\r\n\r\nexport function CardPreview({ card, updateState, groupId, index, calcProgress }) {\r\n\r\n\r\n\r\n    const openCardDetails = (cardId) => {\r\n        updateState('isDetailsShown', { cardId, groupId })\r\n    }\r\n\r\n    return (\r\n        < Draggable draggableId={card.id} index={index} >\r\n            {(provided, snapshot) => (\r\n                <NaturalDragAnimation\r\n                    style={provided.draggableProps.style}\r\n                    snapshot={snapshot}\r\n                >\r\n                    {style => (\r\n                        <Container   isDragging={snapshot.isDragging}  className=\"card-preview flex column justify-center\" onClick={() => openCardDetails(card.id)} {...provided.draggableProps} {...provided.dragHandleProps} style={style} ref={provided.innerRef}>\r\n                            <div className='card flex column space-between' style={{ backgroundColor: card.bgColor }} >\r\n                                <div className=\"flex  space-between\">\r\n                                <div className=\"flex\">{(card.labels && card.labels.length > 0) && \r\n                                        card.labels.map(label => <div key={label} className=\"small-small-label\" style={{ backgroundColor: label }} />)\r\n                                          }</div>\r\n                                    {card.checklist && <div className=\"footer-div-card-prev flex align-center\"><RiTaskLine style={{ marginRight:'5px'}}/>{calcProgress(card.id)}</div>}\r\n                                </div>\r\n                                <p className=\"p-card-preview\">{card.title}</p>\r\n                                        {card.youtube && <div className=\"img-card-preview\"><ReactPlayer  width='100%' height='100%' url={card.youtube} /></div>  ||\r\n                                        card.imgUrl && <img className=\"img-card-preview\" src={card.imgUrl} alt=\"Loading\" />}\r\n                            </div>\r\n                            \r\n                        </Container >\r\n                    )}\r\n                </NaturalDragAnimation>\r\n            )\r\n            }\r\n        </Draggable >\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport class AddText extends React.Component {\r\n\r\n    state = {\r\n        text: ''\r\n    }\r\n    handleValueChange = (ev) => {\r\n        const text = ev.target.value;\r\n        this.setState({ text })\r\n    }\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault();\r\n        if (!this.state.text) return;\r\n        (this.props.type === 'Card') && this.props.updateState('isAddCard', false)\r\n\r\n        this.props.onAdd(this.props.type, this.state.text, this.props.groupId)\r\n        this.setState({ text: '' })\r\n    }\r\n    onRemoveTextEditor = () => {\r\n        let isAddType = (this.props.type==='Card')?'isAddCard':'isAddGroup'\r\n        this.props.updateState (isAddType, false)\r\n        this.setState({ text: '' })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"adding-div flex column\">\r\n                <form onSubmit={this.onSubmit}>\r\n                    \r\n                   \r\n                    <input className=\"title-input\" placeholder={this.props.type === 'Card' ? \"Card name\" : \"List name\"}\r\n                        type=\"text\"\r\n                        onChange={this.handleValueChange}\r\n                        value={this.state.text}\r\n                        autoFocus\r\n                    />\r\n                    <div className=\"flex\">\r\n                        <button className=\"btn\" onClick={this.onSubmit}>{this.props.type === 'Card' ? \"Add Card\" : \"Add List\"}</button>\r\n                        <button className=\"btn cancel-add\" onClick={this.onRemoveTextEditor}>X</button>\r\n                    </div>\r\n                    \r\n               \r\n                </form>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { TwitterPicker } from 'react-color'\r\n\r\n\r\nexport function SimpleMenu({ onRemove, group,isGroupColor,onShowColorTogglle, isDeleteGroup, onShowDeleteTogglle, onAddCard,onGroupColorChange }) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    onAddCard('isAddCard', true)\r\n    handleClose()\r\n  };\r\n  const handledelete = () => {\r\n    if (isGroupColor){ \r\n      onShowColorTogglle()\r\n    }\r\n    onShowDeleteTogglle()\r\n\r\n  };\r\n  const handleClose = () => {\r\n    if (isDeleteGroup) {\r\n       onShowDeleteTogglle()\r\n       setAnchorEl(null);\r\n      } else if (isGroupColor){ \r\n        onShowColorTogglle()\r\n        setAnchorEl(null);\r\n      }else\r\n    setAnchorEl(null);\r\n  };\r\n  const onDelete = () => {\r\n    onRemove(group.id)\r\n    handleClose()\r\n  }\r\n  const handlecolor=(color, ev)=>{\r\n    ev.stopPropagation();\r\n    onGroupColorChange(color.hex)\r\n\r\n  }\r\n  const onColorTogglle=()=>{\r\n    if (isDeleteGroup) {\r\n      onShowDeleteTogglle()\r\n    }\r\n    onShowColorTogglle()\r\n  }\r\n\r\n\r\n  return (\r\n    <div >\r\n    <Button style={{fontWeight:'900',minWidth:'45px'}} aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\r\n       <span style={{marginBottom:\"2px\"}}>. . .</span> \r\n      </Button>\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        {/* <div style={{color:\"#666666\",textAlign:\"center\"}} >List menu </div>\r\n        <hr style={{margin:\"3px 7px\"}}/> */}\r\n        <MenuItem onClick={onColorTogglle} >Background color</MenuItem>\r\n        {isGroupColor &&<TwitterPicker onChange={handlecolor}  colors={['#FFCBA5', '#FEEDCC', '#FFC6E7', '#C9FEC0', '#49D5D0','#EBECF0']} triangle=\"hide\" />}\r\n        <MenuItem onClick={handleAdd}>Add card</MenuItem>\r\n        <MenuItem onClick={handledelete}>Delete list</MenuItem>\r\n        {isDeleteGroup && <MenuItem ><button className=\"btn\" style={{ color: 'red', marginRight: '2px' }} onClick={onDelete}>Delete</button> <button style={{ marginLeft: '2px' }} className=\"btn\" onClick={handleClose}>Cancel</button></MenuItem>}\r\n\r\n      </Menu>\r\n    </div>\r\n  );\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Droppable } from 'react-beautiful-dnd'\r\nimport { CardPreview } from './CardPreview'\r\nimport { AddText } from './AddText'\r\nimport styled from 'styled-components'\r\nimport { SimpleMenu } from './CardListMenu'\r\nimport EditableLabel from 'react-editable-label'\r\nimport Scroll from 'react-scroll';\r\nimport { updateBoard } from '../store/actions/boardActions'\r\nvar Element = Scroll.Element;\r\n\r\nconst Container = styled.div`\r\ntransition: background-color 0.2s ease;\r\nbackground-color: ${props => (props.isDraggingOver ? '#3493A5' : 'inherit')};\r\nmin-height:40px;\r\n`\r\n\r\nexport class _CardList extends Component {\r\n\r\n    state = {\r\n        isAddCard: false,\r\n        isDeleteGroup: false,\r\n        isGroupColor:false\r\n\r\n    }\r\n\r\n\r\n    updateState = (key, val) => {\r\n        this.setState({ [key]: val })\r\n    }\r\n    onRemoveGroup = (groupId) => {\r\n        this.props.onRemoveGroup(groupId)\r\n    }\r\n    onShowDeleteTogglle = () => {\r\n        let isDelete = !this.state.isDeleteGroup\r\n        this.setState({ isDeleteGroup: isDelete })\r\n    }\r\n    onShowColorTogglle = () => {\r\n        let isColor = !this.state.isGroupColor\r\n        this.setState({ isGroupColor: isColor })\r\n    }\r\n\r\n\r\n\r\n    handleFocusOut = (groupTitle) => {\r\n        const board = this.props.board\r\n        let groups = Array.from(board.groups)\r\n        const idx = groups.findIndex(group => group.id === this.props.group.id)\r\n        let group = this.props.group\r\n        group.title = groupTitle\r\n        groups.splice(idx, 1, group)\r\n        board.groups = groups\r\n        this.props.updateBoard(board)\r\n\r\n    }\r\n    onGroupColorChange = (color) => {\r\n        const board = this.props.board\r\n        let groups = Array.from(board.groups)\r\n        const idx = groups.findIndex(group => group.id === this.props.group.id)\r\n        let group = this.props.group\r\n        group.bgColor = color\r\n        groups.splice(idx, 1, group)\r\n        board.groups = groups\r\n        this.props.updateBoard(board)\r\n\r\n    }\r\n\r\n\r\n  \r\n\r\n\r\n    calcProgress = (cardId) => {\r\n\r\n        const cards = this.props.group.cards\r\n        const card = cards.find(card => card.id === cardId)\r\n        if (card.checklist && card.checklist.todos) {\r\n            const tasks = card.checklist.todos.length\r\n            const doneTasks = (card.checklist.todos.filter(task => task.isDone === true)).length\r\n            return (`${doneTasks}/${tasks}`)\r\n        } return ''\r\n\r\n    }\r\n     longTxt (text) {\r\n        const textToShow =(text.length <= 20)? text : text.substring(0,20).trim() + '...';    \r\n            return textToShow\r\n                   \r\n     }\r\n\r\n\r\n    render() {\r\n        const group = this.props.group\r\n        return (\r\n            <div style={{ backgroundColor: (group.bgColor) ? (group.bgColor) : '#ebecf0' }} className=\"card-list flex column\" id=\"card-container\">\r\n                <header className=\"card-header flex space-between align-center\">\r\n                \r\n                       \r\n                            <EditableLabel \r\n                         initialValue={(group.title)}\r\n                         save={value => {this.handleFocusOut(value)}}\r\n                         inputClass='title-input'\r\n                         labelClass='my-label-class'\r\n                         \r\n                            />\r\n                  \r\n                  <SimpleMenu style={{widte:'52px'}} onShowColorTogglle={this.onShowColorTogglle} onGroupColorChange={this.onGroupColorChange} isGroupColor={this.state.isGroupColor} isDeleteGroup={this.state.isDeleteGroup} onAddCard={this.updateState} onShowDeleteTogglle={this.onShowDeleteTogglle} onRemove={this.onRemoveGroup} group={group} />\r\n                </header>\r\n                <Element style={{\r\n                    height: 'auto',\r\n                    width: '100%',\r\n                    overflow: 'scroll',\r\n                    overflowX: 'hidden',\r\n                    paddingLeft: '8px',\r\n                    paddingRight: '4px'\r\n                }}>\r\n\r\n                    <Droppable droppableId={group.id}>\r\n                        {(provided, snapshot) => (\r\n\r\n                            <Container ref={provided.innerRef}\r\n                                {...provided.droppableProps}\r\n                                isDraggingOver={snapshot.isDraggingOver}>\r\n                                {group.cards.map((card, index) => <CardPreview calcProgress={this.calcProgress} index={index} card={card} key={card.id} updateState={this.props.updateState} groupId={group.id} />)}\r\n                                {provided.placeholder}\r\n                            </Container>\r\n                        )}</Droppable>\r\n\r\n                </Element>\r\n                {this.state.isAddCard ?\r\n                   <AddText style={{margin:\"0\"}} onAdd={this.props.onAdd} type=\"Card\" groupId={group.id} updateState={this.updateState} />\r\n                    :\r\n                    <button className=\" add-card-btn\" onClick={() => this.updateState('isAddCard', true)}>+ Add card</button>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    board: state.boardReducer.currBoard\r\n})\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n}\r\n\r\nexport const CardList = connect(mapStateToProps, mapDispatchToProps)(_CardList)","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { cloudinaryService } from \"../services/cloudinaryService\";\r\nimport { CirclePicker } from \"react-color\";\r\n\r\nfunction Canvas({ updateState, card }) {\r\n  const canvasRef = useRef(null);\r\n  const contextRef = useRef(null);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [color, setColor] = useState(null);\r\n  window.addEventListener (\"touchmove\", function (event) { event.preventDefault (); }, {passive: false});\r\n \r\n  useEffect( () => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    canvas.width = 300;\r\n    canvas.height = 300;\r\n    context.lineCap = \"round\";\r\n    context.strokeStyle = setColor('black');\r\n    context.lineWidth = 3;\r\n    contextRef.current = drawImg(context,canvas)\r\n  },[])\r\n\r\n  const startDrawing = ({ nativeEvent }) => {\r\n    contextRef.current.strokeStyle = color;\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    contextRef.current.beginPath();\r\n    contextRef.current.moveTo(offsetX, offsetY);\r\n    setIsDrawing(true);\r\n  };\r\n  \r\n  const draw = ({ nativeEvent }) => {\r\n    if (!isDrawing) {\r\n      return;\r\n    }\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    contextRef.current.lineTo(offsetX, offsetY);\r\n    contextRef.current.stroke();\r\n  };\r\n\r\n  const finishDrawing = () => {\r\n    contextRef.current.closePath();\r\n    setIsDrawing(false);\r\n  };\r\n\r\n  const closeCanvas = () => {\r\n    updateState(\"isCanvas\", false);\r\n  };\r\n\r\n  const addCanvasToCard = async () => {\r\n    const canvas = canvasRef.current;\r\n    card.imgUrl = canvas.toDataURL();\r\n    var file = cloudinaryService.dataURLtoFile(card.imgUrl, \"canvas.png\");\r\n    card.imgUrl = await cloudinaryService.uploadCanvasImg(file);\r\n    closeCanvas();\r\n    return card;\r\n  };\r\n\r\n  const changeStrokeStyle = (color) => {\r\n    setColor(color.hex);\r\n  };\r\n\r\n  const drawImg=(context,canvas)=>{\r\n    const img = new Image();\r\n    img.onload = () => {\r\n      context.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n    };\r\n    img.crossOrigin = \"Anonymous\";\r\n    img.src = card.imgUrl;\r\n    return context\r\n  }\r\n  const startTouchDrawing = ({ nativeEvent }) => {\r\n        contextRef.current.strokeStyle = color;\r\n        const { clientX, clientY } = nativeEvent.touches[0];\r\n        contextRef.current.beginPath();\r\n        contextRef.current.lineTo(clientX-50, clientY-190); \r\n        setIsDrawing(true);\r\n      }\r\n  const touchdraw = ({ nativeEvent }) => {\r\n        if (!isDrawing) {\r\n          return;\r\n        }\r\n        const { clientX, clientY } = nativeEvent.touches[0];\r\n        contextRef.current.lineTo(clientX-55, clientY-195);\r\n        contextRef.current.stroke();\r\n      };\r\n \r\n\r\n  return (\r\n    <div className=\"canvas-wrapper\" onClick={closeCanvas}>\r\n      <div\r\n        className=\"canvas-modal-content flex column justify-center space-evenly \"\r\n        onClick={(nativeEvent) => nativeEvent.stopPropagation()}\r\n      >\r\n        <canvas\r\n        \r\n          style={{ marginBottom: \"10px\" }}\r\n          onMouseDown={startDrawing}\r\n          onMouseUp={finishDrawing}\r\n          onMouseMove={draw}\r\n          onTouchStart={startTouchDrawing}\r\n          onTouchEnd={finishDrawing}\r\n          onTouchMove={touchdraw}\r\n          ref={canvasRef}\r\n        />\r\n        <CirclePicker\r\n          className=\"self-center\"\r\n          onChange={changeStrokeStyle}\r\n          colors={[\r\n            \"#000000\",\r\n            \"#0050fb\",\r\n            \"#ff0000\",\r\n            \"#00ff2b\",\r\n            \"#fdff00\",\r\n            \"#533829\",\r\n          ]}\r\n        />\r\n        <button className=\"btn\" onClick={addCanvasToCard}>\r\n          save canvas\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Canvas;\r\n","import React from \"react\";\r\n\r\nexport class ColorModal extends React.Component {\r\n\r\n    onClickColor = (color, ev) => {\r\n        const labels = this.props.labels\r\n        ev.stopPropagation();\r\n        if (labels && labels.length > 0) {\r\n            if(labels.length >= 4) return\r\n            const isColorInLabels = labels.filter(label => label === color)\r\n            if (isColorInLabels.length > 0) {\r\n                return\r\n            } else {\r\n                this.props.onSaveLabels(color, ev);\r\n            }\r\n        } else {\r\n            this.props.onSaveLabels(color, ev);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const colors = [\r\n            '#61BD4F',\r\n            '#F2D600',\r\n            '#FF9F1A',\r\n            '#EB5A46',\r\n            '#C377E0',\r\n            '#0079BF',\r\n        ]\r\n        return (\r\n            <div className=\"color-container flex column\">\r\n                {colors.map(color => <span key={color} onClick={(ev) => this.onClickColor(color, ev)} style={{ backgroundColor: color }} />)}\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { FiDelete } from \"react-icons/fi\";\r\n\r\n\r\nexport default class TodoPreview extends Component {\r\n    state={\r\n        todo:{\r\n            title:'',\r\n            isDone:'',\r\n            id:''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ todo: this.props.todo })\r\n    }\r\n\r\n    onInputChange = (ev) => {\r\n        ev.preventDefault()\r\n    }\r\n\r\n    onCheckboxChange = () => {\r\n        const bool = (this.state.todo.isDone) ? false : true;\r\n        this.setState(prevState => ({\r\n            todo: {\r\n                ...prevState.todo,\r\n                isDone: bool\r\n\r\n            }\r\n        }), () => {this.props.updateCheckbox(this.state.todo)})\r\n    }\r\n    render() {\r\n        const { todo } = this.props\r\n        return (\r\n            <div className=\"flex\">\r\n\r\n                <form className=\"flex align-center space-between hundredPw\" action=\"\">\r\n\r\n\r\n                        <p className={`todo-title ${this.state.todo.isDone === true ? \"line-through\" : \"text-dec-none\"}`} onClick={() => this.onCheckboxChange()}>{todo.title}</p>\r\n                    {/* <div className=\"flex align-center space-between\"> */}\r\n                       < FiDelete className=\"todo-btn-delete\" onClick={() => { this.props.onRemoveTodo(todo.id) }} />\r\n                    {/* </div> */}\r\n\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport TodoPreview from './TodoPreview'\r\nimport { boardService } from '../services/boardService.js'\r\nimport { BiListUl } from \"react-icons/bi\";\r\nimport { connect } from 'react-redux';\r\nimport EditableLabel from 'react-inline-editing';\r\n\r\nexport class _ChecklistPreview extends Component {\r\n\r\n    state = {\r\n        checklist: {},\r\n        isTodoEditShown: '',\r\n        newTodo: {\r\n            title: '',\r\n            id: '',\r\n            isDone: false\r\n        },\r\n        progressbar: \"\"\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ checklist: this.props.checklist }, this.calculateProgress())\r\n\r\n    }\r\n\r\n    onRemoveTodo = (todoId) => {\r\n        this.calculateProgress()\r\n        const todos = this.state.checklist.todos\r\n        const todoIdx = todos.findIndex(todo => todo.id === todoId)\r\n        todos.splice(todoIdx, 1)\r\n        this.setState(prevState => ({\r\n            checklist: {\r\n                ...prevState.checklist,\r\n                todos\r\n            }\r\n        }))\r\n        this.props.onUpdateChecklists(this.state.checklist)\r\n        this.calculateProgress()\r\n    }\r\n\r\n    onHandleInput = (ev) => {\r\n        const title = ev.target.value\r\n        this.setState(prevState => ({\r\n            newTodo: {\r\n                ...prevState.newTodo,\r\n                title\r\n            }\r\n        }))\r\n    }\r\n\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        const id = boardService.makeId()\r\n        const isDone = false;\r\n        this.setState(prevState => ({\r\n            newTodo: {\r\n                ...prevState.newTodo,\r\n                id,\r\n                isDone\r\n            }\r\n        }), () => { this.updateLocalChecklist() })\r\n\r\n    }\r\n    updateLocalChecklist = (updTodo) => {\r\n        if (updTodo) {\r\n            const todos = this.state.checklist.todos\r\n\r\n            const idx = todos.findIndex(todo => todo.id === updTodo.id)\r\n            todos.splice(idx, 1, updTodo)\r\n\r\n            this.setState(prevState => ({\r\n                checklist: {\r\n                    ...prevState.checklist,\r\n                    todos: [\r\n                        ...todos\r\n                    ]\r\n                }\r\n            }), this.onUpdateChecklists)\r\n        } else {\r\n            const todos = this.state.checklist.todos\r\n            todos.push(this.state.newTodo)\r\n            this.setState(prevState => ({\r\n                checklist: {\r\n                    ...prevState.checklist,\r\n                    todos: [\r\n                        ...todos\r\n                    ]\r\n                }\r\n            }), this.onUpdateChecklists)\r\n        }\r\n        this.calculateProgress()\r\n    }\r\n\r\n    onUpdateChecklists = () => {\r\n        const checklist = this.state.checklist\r\n        this.props.onUpdateChecklists(checklist)\r\n        this.calculateProgress()\r\n    }\r\n\r\n    calculateProgress() {\r\n\r\n        if (!this.props.checklist) return this.setState({ progressbar: 0 })\r\n        const todos = this.props.checklist.todos\r\n        if (todos.length > 0) {\r\n            const totalTodos = todos.length\r\n            const isDones = (todos.filter((todo) => todo.isDone === true)).length\r\n            const res = (isDones / totalTodos) * 100\r\n            return this.setState({ progressbar: res.toFixed(2) })\r\n        } return this.setState({ progressbar: 0 })\r\n    }\r\n    handleFocusOut = (title) => {\r\n    let checklist = this.props.checklist   \r\n    let updtTitle= this.props.checklist.title\r\n    updtTitle=title\r\n    checklist.title=updtTitle\r\n    this.props.onUpdateChecklists(checklist)\r\n    }\r\n\r\n    render() {\r\n        const { checklist } = this.props\r\n        return (\r\n            <div className=\"checklist-preview-div flex column\">\r\n                <div className=\"checklist-prev-header flex space-between\">\r\n                    <div className=\"flex align-center\"><BiListUl style={{\r\n                        marginRight: '5px', width: '18px',\r\n                        height: '18px'\r\n                    }} />\r\n\r\n                        <EditableLabel text={checklist.title}\r\n\r\n                            onFocusOut={this.handleFocusOut}\r\n                            inputWidth='200px'\r\n                            inputHeight='34px'\r\n                            cursor='pointer'\r\n                            labelFontSize='1.1rem'\r\n                            inputFontWeight='400'\r\n                            labelClassName='cd-subt' />\r\n\r\n\r\n                    </div>\r\n                        <button className=\"btn delete-checklist\" onClick={() => this.props.removeChecklist()}>Delete Checklist</button>\r\n                </div>\r\n                <label htmlFor=\"progress-bar\">Todos progress: {this.state.progressbar}%</label>\r\n                <progress style={{ width: '50%' }} id=\"progress-bar\" value={`${this.state.progressbar}`} max=\"100\"></progress>\r\n                <p className=\"cd-subt\" style={{ marginTop:'25px', fontSize: '0.95rem'}}>Your Todos:</p>\r\n                <div className=\"grey-zone\">\r\n                    {checklist.todos && checklist.todos.map(todo => <TodoPreview key={todo.id} todo={todo} updateCheckbox={this.updateLocalChecklist} onRemoveTodo={this.onRemoveTodo} />)}\r\n                    <button style={{\r\n                        display: (this.state.isTodoEditShown) ? \"none\" : \"block\",\r\n                        margin: '0', padding: '3px 6px '\r\n                    }} onClick={() => { this.setState({ isTodoEditShown: true }) }} className=\"btn add-todo-btn\">Add Todo</button>\r\n                    {this.state.isTodoEditShown &&\r\n\r\n                        <div>\r\n                            <form onSubmit={this.onSubmit} action=\"\">\r\n                                <button onClick={() => this.setState({ isTodoEditShown: false })} className=\"btn\" >X</button>\r\n                                <label htmlFor=\"todo-title\">Todo Title:</label>\r\n                                <input onChange={this.onHandleInput} id=\"todo-title\" type=\"text\" />\r\n                                <button className=\"btn\" >Save</button>\r\n                            </form>\r\n                        </div>}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.currBoard\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport const ChecklistPreview = connect(mapStateToProps, mapDispatchToProps)(_ChecklistPreview)","import React from 'react'\r\n// import { connect } from 'react-redux'\r\nimport { ChecklistPreview } from './ChecklistPreview'\r\n\r\n\r\n\r\nexport function Checklist({checklist,removeChecklist, saveChecklist, updateLocalCard }) {\r\n  \r\n     \r\n        return (\r\n            <div>\r\n                { checklist.title && <ChecklistPreview removeChecklist={removeChecklist} onUpdateChecklists={saveChecklist} checklist={checklist} key={checklist.id} />}\r\n            </div>\r\n        )\r\n    }\r\n\r\n","import React, { Component } from 'react'\r\nimport { boardService } from '../services/boardService.js'\r\n\r\nexport default class ChecklistAdd extends Component {\r\n\r\n    state = {\r\n        checklist: {\r\n            id: '',\r\n            title: '',\r\n            todos: []\r\n        }\r\n    }\r\n    handleChange = (ev) => {\r\n\r\n        const title = ev.target.value\r\n        this.setState(prevState => ({\r\n            checklist: {\r\n                ...prevState.checklist,\r\n                title\r\n            }\r\n        }))\r\n    }\r\n    onSubmit = (ev) => {\r\n        ev.preventDefault()\r\n\r\n        const id = boardService.makeId()\r\n        this.setState(prevState => ({\r\n            checklist: {\r\n                ...prevState.checklist,\r\n                id,\r\n            }\r\n        }), () => { this.props.addNewChecklist(this.state.checklist) })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <form onSubmit={this.onSubmit} action=\"\">\r\n                    <label htmlFor=\"\">New Checklist Title:</label>\r\n                    <input onChange={this.handleChange} type=\"text\" />\r\n                    <button className=\"btn\">Add</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { FaUserCircle } from \"react-icons/fa\";\r\nimport { Avatar } from '@material-ui/core';\r\n\r\nimport { userService } from '../services/userService'\r\n\r\nexport function CardInvite({ board, card, updateBoard }) {\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n    const allMembers = board.members ? [...board.members] : [];\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    }\r\n    const onSelectMember = async (userId) => {\r\n        setAnchorEl(null);\r\n        if (card.members) {\r\n            const memberInBoard = card.members.filter(member => member._id === userId)\r\n            if (memberInBoard.length > 0) return\r\n            const user = await userService.getById(userId)\r\n            card.members.push(user)\r\n        } else {\r\n            const user = await userService.getById(userId)\r\n            card.members = [user]\r\n        }\r\n        updateBoard(board)\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"invite-modal\">\r\n            <div onClick={handleClick} className=\"board-header-invite-details\">\r\n                <p className=\"invite-details-btn\"><FaUserCircle style={{ margin: \"0px 5px -2px\" }} />Invite</p>\r\n                <p className=\"invite-details-btn-small-screen\"><FaUserCircle /></p>\r\n            </div>\r\n            {/* <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick} >\r\n                <p className=\"btn btn-invite\"><FaUserCircle style={{ margin: \"0px 5px -2px\" }} />Invite</p>\r\n                <p className=\"btn invite-btn-small-screen\"><FaUserCircle style={{ marginRight: \"5px\" }} /></p>\r\n            </Button> */}\r\n            <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleClose}\r\n            >\r\n                {allMembers.length > 0 ?\r\n                    allMembers.map(member =>\r\n                        <MenuItem key={member._id} className=\"user-in-list\">\r\n                            <div className=\"members flex\" onClick={() => onSelectMember(member._id)}>\r\n                                <Avatar src={member.imgUrl} alt=\"img\" className=\"user-img\" />\r\n                                <p className=\"user-name\">{member.userName}</p>\r\n                            </div>\r\n                        </MenuItem>)\r\n                    :\r\n                    <MenuItem>The are no members in this board</MenuItem>\r\n                }\r\n            </Menu>\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Avatar } from '@material-ui/core';\r\nimport { AvatarGroup } from '@material-ui/lab';\r\nimport { FaCheckCircle, FaFileImage, FaTrashAlt, FaUserCircle, FaCalendarAlt, FaYoutube, FaPaintBrush } from \"react-icons/fa\";\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { BiMenu, } from \"react-icons/bi\";\r\nimport { MdColorLens, MdInvertColors } from \"react-icons/md\";\r\nimport { TwitterPicker } from \"react-color\";\r\nimport EditableLabel from 'react-editable-label'\r\nimport ReactPlayer from 'react-player/youtube'\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport Scroll from 'react-scroll';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport Canvas from \"./Canvas\";\r\nimport { ColorModal } from './ColorModal'\r\nimport { boardService } from '../services/boardService'\r\nimport { AddImg } from './AddImg'\r\nimport { Checklist } from './Checklist'\r\nimport ChecklistAdd from './ChecklistAdd';\r\nimport { updateBoard } from '../store/actions/boardActions'\r\nimport { CardInvite } from './CardInvite'\r\n\r\nvar Element = Scroll.Element;\r\n\r\nexport class _CardDetails extends Component {\r\n\r\n    state = {\r\n        card: null,\r\n        isAddImgModalShown: false,\r\n        isDescriptionEdit: false,\r\n        isTimeEdit: false,\r\n        isLabelesEdit: false,\r\n        isChecklistEdit: false,\r\n        isAddColorModalShown: false,\r\n        isYoutubeShown: false,\r\n        isCanvas: false,\r\n    }\r\n\r\n    componentDidMount() {\r\n        const card = boardService.getCardById(this.props.board, this.props.groupId, this.props.cardId)\r\n        this.setState({ card })\r\n    }\r\n\r\n    updateState = (key, val) => {\r\n        this.setState({ [key]: val })\r\n        if (key === 'isAddImgModalShown') {\r\n            this.onRemoveYoutube()\r\n        }\r\n    }\r\n    onRmoveModal = () => {\r\n        this.saveCard()\r\n        this.props.updateState('isDetailsShown', false)\r\n    }\r\n    onHandleRemove = () => {\r\n        this.props.updateState('isDetailsShown', false)\r\n        boardService.addActivity(this.props.board, 'Remove card', this.state.card, this.props.currUser)\r\n        this.props.onRemoveCard(this.state.card.id)\r\n    }\r\n\r\n\r\n    onRemoveImg = () => {\r\n        const card = this.state.card\r\n        delete card.imgUrl\r\n        this.setState({ card })\r\n    }\r\n    onRemoveYoutube = () => {\r\n        const card = this.state.card\r\n        delete card.youtube\r\n        this.setState({ card })\r\n    }\r\n    saveCard = () => {\r\n        this.updateState('isDescriptionEdit', false)\r\n        var cardId = this.state.card.id;\r\n        const newBoard = { ...this.props.board }\r\n        const group = newBoard.groups.find(group => group.id === this.props.groupId);\r\n        const cardIdx = group.cards.findIndex(card => card.id === cardId);\r\n        group.cards.splice(cardIdx, 1, this.state.card)\r\n        this.props.updateBoard(newBoard)\r\n    }\r\n\r\n    doneEdit = () => {\r\n        this.updateState('isDescriptionEdit', false)\r\n        this.saveCard()\r\n    }\r\n    updateLocalCard = (key, val) => {\r\n\r\n        this.setState(prevState => ({\r\n            card: {\r\n                ...prevState.card,\r\n                [key]: val\r\n            }\r\n        }))\r\n    }\r\n    handleFocusOut = (title) => {\r\n        this.updateLocalCard('title', title)\r\n\r\n    }\r\n    onRemoveDuedate = () => {\r\n        this.updateState('isTimeEdit', false)\r\n        const card = this.state.card\r\n        delete card.dueDate\r\n        this.setState({ card })\r\n        this.saveCard()\r\n\r\n    }\r\n    handleChangeDuedate = (data) => {\r\n        this.updateState(\"isTimeEdit\", false);\r\n        this.updateLocalCard(\"dueDate\", data);\r\n        this.saveCard();\r\n    };\r\n    onSaveLabels = (val, ev) => {\r\n        ev.stopPropagation();\r\n        if (this.state.card.labels && this.state.card.labels.length > 4) return;\r\n        var labels = [val];\r\n        if (this.state.card.labels) {\r\n            labels = this.state.card.labels;\r\n            labels.push(val);\r\n        }\r\n        this.updateLocalCard(\"labels\", labels);\r\n        boardService.addActivity(\r\n            this.props.board,\r\n            \"Add label\",\r\n            this.state.card,\r\n            this.props.currUser\r\n        );\r\n    };\r\n    onRemoveLabel = (label) => {\r\n        const labels = this.state.card.labels;\r\n        const labelIdx = labels.indexOf(label);\r\n        labelIdx > -1 && labels.splice(labelIdx, 1);\r\n        this.updateLocalCard(\"labels\", labels);\r\n    };\r\n    onOpenDuedate = () => {\r\n        this.updateLocalCard(\"dueDate\", new Date());\r\n        this.setState({ isTimeEdit: true });\r\n        boardService.addActivity(\r\n            this.props.board,\r\n            \"Add dueDate\",\r\n            this.state.card,\r\n            this.props.currUser\r\n        );\r\n    };\r\n    saveChecklist = (checklist) => {\r\n        this.updateLocalCard(\"checklist\", checklist);\r\n        this.saveCard();\r\n    };\r\n    addNewChecklist = (checklist) => {\r\n        this.saveChecklist(checklist);\r\n    };\r\n    removeChecklist = () => {\r\n        this.saveChecklist({});\r\n    };\r\n    onOpenLabelModal = (ev) => {\r\n        ev.stopPropagation();\r\n        if (this.state.isLabelesEdit) {\r\n            this.setState({ isLabelesEdit: false });\r\n            return;\r\n        }\r\n        if (this.state.card.labels) {\r\n            if (this.state.card.labels.length < 6) {\r\n                this.setState({ isLabelesEdit: true });\r\n            }\r\n        } else {\r\n            this.setState({ isLabelesEdit: true });\r\n        }\r\n    }\r\n    onRemoveLabel = (label) => {\r\n        const labels = this.state.card.labels\r\n        const labelIdx = labels.indexOf(label);\r\n        labelIdx > -1 && labels.splice(labelIdx, 1);\r\n        this.updateLocalCard('labels', labels)\r\n    }\r\n    onOpenDuedate = () => {\r\n        this.updateLocalCard('dueDate', new Date())\r\n        this.setState({ isTimeEdit: true })\r\n        boardService.addActivity(this.props.board, 'Add dueDate', this.state.card, this.props.currUser)\r\n\r\n    }\r\n    saveChecklist = (checklist) => {\r\n        this.updateLocalCard('checklist', checklist)\r\n        this.saveCard()\r\n    }\r\n    addNewChecklist = (checklist) => {\r\n        this.saveChecklist(checklist)\r\n    }\r\n    removeChecklist = () => {\r\n        this.saveChecklist({})\r\n    }\r\n    onOpenLabelModal = (ev) => {\r\n        ev.stopPropagation()\r\n        if (this.state.isLabelesEdit) {\r\n            this.setState({ isLabelesEdit: false })\r\n            return\r\n        }\r\n        if (this.state.card.labels) {\r\n            if (this.state.card.labels.length < 5) {\r\n                this.setState({ isLabelesEdit: true })\r\n            }\r\n        } else {\r\n            this.setState({ isLabelesEdit: true })\r\n        }\r\n    }\r\n    openChecklistEditor = () => {\r\n        this.setState({ isChecklistEdit: (this.state.isChecklistEdit ? false : true) })\r\n        boardService.addActivity(this.props.board, 'Add Checklist', this.state.card, this.props.currUser)\r\n\r\n    }\r\n    handleChangeBGColor = (color, ev) => {\r\n        ev.stopPropagation();\r\n        this.updateLocalCard('bgColor', color.hex)\r\n    }\r\n    onOpenColorModal = (ev) => {\r\n        ev.stopPropagation();\r\n        boardService.addActivity(this.props.board, 'Add BG Color', this.state.card, this.props.currUser)\r\n        this.setState({ isAddColorModalShown: true })\r\n        this.saveCard()\r\n    }\r\n\r\n    onModalClick = () => {\r\n        this.setState({ isAddColorModalShown: false })\r\n        this.setState({ isLabelesEdit: false })\r\n    }\r\n    getAvatar(member) {\r\n        if (member && member.imgUrl) {\r\n            return <Avatar key={member._id} src={member.imgUrl} className=\"avatar\" onClick={(ev) => this.removeMemberFromCard(member._id, ev)}/>\r\n        }\r\n        if (member) {\r\n            return <Avatar key={member._id} className=\"avatar\" onClick={(ev) => this.removeMemberFromCard(member._id, ev)}>{member.userName.substring(0, 1).toUpperCase()}{member.userName.substring(1, 2).toUpperCase()}</Avatar>\r\n        }\r\n        return <Avatar className=\"avatar\" onClick={(ev) => this.removeMemberFromCard(member._id, ev)}/>\r\n    }\r\n    removeMemberFromCard = (memberId, ev) => {\r\n        ev.stopPropagation()\r\n        const card = this.state.card\r\n        const memberInCard = card.members.filter(member => member._id !== memberId)\r\n        card.members = memberInCard\r\n        this.updateLocalCard('members', memberInCard)\r\n        updateBoard(this.props.board)\r\n    }\r\n    youtubeFunc = (url) => {\r\n        this.setState({ isYoutubeShown: false })\r\n        this.onRemoveImg()\r\n        this.updateLocalCard('youtube', url)\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.card) return <LinearProgress />\r\n        const { card } = this.state\r\n        const { board } = this.props\r\n\r\n        return (\r\n            <div className=\"card-modal flex align-center\">\r\n\r\n                <div className=\"empty-modal\" onClick={this.onRmoveModal}></div>\r\n\r\n                <div className=\"details-modal flex column\" onClick={this.onModalClick}>\r\n\r\n                    <header className=\"card-header flex column align-center\" style={{ backgroundColor: card.bgColor }}>\r\n\r\n                        {card.youtube && <ReactPlayer width='50%' height='100%' url={card.youtube} />}\r\n\r\n                        {card.imgUrl &&\r\n                            <img className=\"card-img\" src={card.imgUrl} alt=\"Loading\" />\r\n                        }\r\n                        {card.imgUrl && <button onClick={this.onRemoveImg} className=\"btn delete-img-btn\" style={{ paddingLeft: \"10px\", paddingRight: \"6px\" }}><FaTrashAlt style={{ marginRight: \"5px\" }} /></button>}\r\n\r\n\r\n                        {this.state.isAddColorModalShown &&\r\n                            <div>\r\n                                <TwitterPicker onChange={this.handleChangeBGColor} colors={['#FEEDCC', '#DDDEAD', '#A9D7A9', '#51C2B1', '#24A39A', '#679CB4', '#A67376', '#FE797B', '#FFB750', '#FFEA56', '#8FE968', '#36CEDC', '#A587CA','#F3F3F6',]} triangle=\"hide\" />\r\n                            </div>\r\n                        }\r\n                    </header>\r\n                    <div className=\"body-div flex\">\r\n                        <Element style={{\r\n                            height: '380px',\r\n                            width: '100%',\r\n                            overflow: 'scroll',\r\n                            overflowX: 'hidden',\r\n                        }}>\r\n                            <div className=\"modal-details-left\">\r\n\r\n\r\n\r\n\r\n                                <EditableLabel\r\n                                    initialValue={(card.title)}\r\n                                    save={value => { this.handleFocusOut(value) }}\r\n                                    inputClass='title-input'\r\n                                    labelClass='my-label-class'\r\n\r\n                                />\r\n                                <div>\r\n                                    {(card.labels && card.labels.length > 0) &&\r\n                                        <div style={{ margin: '15px 0', height: '40px' }} className=\"flex\">\r\n                                            <div className=\"flex align-center\">\r\n                                                <p style={{ marginRight: '10px' }} className=\"cd-subt\">Labels: </p>\r\n                                                {card.labels.map(label => <div key={label} onClick={() => this.onRemoveLabel(label)} className=\"small-label\" style={{ backgroundColor: label }} />)}\r\n                                            </div>\r\n                                        </div>\r\n                                    }\r\n                                    <div className=\"flex align-center\"><BiMenu style={{\r\n                                        marginRight: '5px', width: '18px',\r\n                                        height: '18px'\r\n                                    }} /><p onClick={() => this.updateState('isDescriptionEdit', true)} className=\"cd-subt\"> Description</p></div>\r\n\r\n                                    {this.state.isDescriptionEdit ?\r\n                                        <div className=\"edit-desc flex column align-center\" >\r\n\r\n                                            <TextareaAutosize\r\n                                                rowsMax={4}\r\n                                                aria-label=\"maximum height\"\r\n                                                placeholder=\"Enter description\"\r\n                                                defaultValue={this.state.card.description}\r\n                                                border=\"none\"\r\n                                                className=\"edit-card-description\"\r\n                                                onChange={ev => this.updateLocalCard('description', ev.target.value)}\r\n                                            />\r\n                                            <button onClick={this.saveCard} className=\"btn\">Save</button>\r\n                                        </div>\r\n                                        :\r\n                                        <div\r\n                                            onClick={() => this.updateState('isDescriptionEdit', true)}>\r\n                                            <pre>{this.state.card.description ? this.state.card.description : \"Add a more details description...\"}\r\n                                            </pre>  </div>\r\n                                    }\r\n                                </div>\r\n\r\n                                <div className=\"members-container flex\">\r\n\r\n                                    {/* <button className=\"btn btn-invite self-start\" > <FaUserCircle style={{ marginRight: \"5px\" }} /> Invite</button> */}\r\n\r\n                                    <CardInvite board={board} card={card} updateBoard={this.props.updateBoard} />\r\n\r\n                                    {(card.members && card.members.length > 0) &&\r\n                                        <div>\r\n                                            <section className=\"avatar-members flex\">\r\n                                                {card.members &&\r\n                                                    <AvatarGroup max={4}>\r\n                                                        {card.members.map(member => this.getAvatar(member))}\r\n                                                    </AvatarGroup>\r\n                                                }\r\n                                            </section>\r\n                                        </div>\r\n                                    }\r\n                                </div>\r\n\r\n                                {(this.state.isTimeEdit || card.dueDate) &&\r\n                                    <div>\r\n                                        <DatePicker\r\n                                            selected={(card.dueDate) ? new Date(card.dueDate) : new Date()}\r\n                                            onChange={this.handleChangeDuedate}\r\n                                            showTimeSelect\r\n                                            dateFormat=\"Pp\"\r\n                                        />\r\n\r\n                                        <button onClick={this.onRemoveDuedate} className=\"btn\">X</button>\r\n                                    </div>\r\n                                }\r\n\r\n\r\n                                {this.state.card.checklist && <Checklist removeChecklist={this.removeChecklist} saveChecklist={this.saveChecklist} checklist={this.state.card.checklist} />}\r\n                                {this.state.isChecklistEdit && <ChecklistAdd addNewChecklist={this.addNewChecklist} />}\r\n\r\n\r\n                            </div>\r\n                        </Element>\r\n\r\n                        <div className=\"side-bar-details-right flex column justify-start\">\r\n                            <button className=\"btn align-center\" style={{ display: 'flex' }} onClick={() => this.updateState('isAddImgModalShown', true)}><FaFileImage style={{ marginRight: \"7px\" }} />Cover</button>\r\n\r\n                            <button className=\"btn align-center\" style={{ display: 'flex' }} onClick={this.onOpenColorModal}><MdColorLens style={{ marginRight: \"3px\", height: '12px', width: '12px' }} />Color</button>\r\n\r\n                            <button className=\"btn align-center\" style={{ display: 'flex' }} onClick={() => this.openChecklistEditor()}><FaCheckCircle style={{ marginRight: \"6px\" }} />Checklist</button>\r\n                            <button onClick={this.onOpenDuedate} className=\"btn align-center\"><FaCalendarAlt style={{ marginRight: \"5px\" }} /> Duedate</button>\r\n                            <button onClick={this.onOpenLabelModal} style={{ display: 'flex' }} className=\"btn align-center\"><MdInvertColors style={{ marginRight: \"5px\", height: '12px', width: '12px' }} />Labels</button>\r\n                            {this.state.isLabelesEdit &&\r\n                                <ColorModal className=\"color-modal\" onSaveLabels={this.onSaveLabels} labels={card.labels} />}\r\n\r\n                            <button className=\"btn align-center\" style={{ display: 'flex' }} onClick={() => (this.setState({ isYoutubeShown: true }))}><FaYoutube style={{ marginRight: \"6px\", height: '12px', width: '12px' }} /> YouTube</button>\r\n                            {this.state.isYoutubeShown && <div style={{ border: \"1px solid black\" }}><EditableLabel\r\n                                initialValue={'Paste Url'}\r\n                                save={(url) => this.youtubeFunc(url)}\r\n                                labelClassName='youtube-label'\r\n                                inputClassName='youtube-input'\r\n                            /></div>\r\n                            }\r\n                            {!card.youtube && <button onClick={() => this.setState({ isCanvas: true })} className=\"btn\"><FaPaintBrush style={{ marginRight: \"6px\" }} />Canvas</button>}\r\n                            <button onClick={this.onHandleRemove} className=\"btn\"> <FaTrashAlt style={{ marginRight: \"6px\" }} />Card</button>\r\n                        </div>\r\n\r\n                    </div >\r\n                    {this.state.isAddImgModalShown && <AddImg card={card} updateState={this.updateState} />}\r\n                    {this.state.isCanvas && <Canvas updateLocalCard={this.updateLocalCard} updateState={this.updateState} card={this.state.card} />}\r\n                </div >\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        board: state.boardReducer.currBoard,\r\n        currUser: state.userReducer.loggedInUser,\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n};\r\n\r\nexport const CardDetails = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(_CardDetails);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport StickyBox from \"react-sticky-box\";\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { cleanBoard,loadBoard, updateBoard, updateBoardFromSocket } from \"../store/actions/boardActions\";\r\nimport { BoardHeader } from \"../cmps/BoardHeader\";\r\nimport { CardList } from \"../cmps/CardList\";\r\nimport { CardDetails } from \"../cmps/CardDetails\";\r\nimport { DragDropContext } from \"react-beautiful-dnd\";\r\nimport { AddText } from \"../cmps/AddText\";\r\nimport { boardService } from \"../services/boardService\";\r\nimport socketService from '../services/socketService';\r\n\r\n\r\nexport class _BoardDetails extends Component {\r\n  state = {\r\n    isDetailsShown: false,\r\n    isAddGroup: false,\r\n    board:null\r\n\r\n  };\r\n\r\n  componentDidMount ()  {\r\n    const { boardId } = this.props.match.params;\r\n    this.props.loadBoard(boardId);\r\n    socketService.setup();\r\n    socketService.emit('connect to board', boardId);\r\n    socketService.on('send updated board', this.props.updateBoardFromSocket);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    socketService.terminate();\r\n    this.props.cleanBoard()  \r\n  }\r\n \r\n  updateState = (key, val) => {\r\n    this.setState({ [key]: val });\r\n  };\r\n  onEditGroup = () => {\r\n    this.setState({ isAddGroup: true });\r\n  };\r\n\r\n  onAdd = (type, text, groupId) => {\r\n    const newboard = { ...this.props.board };\r\n    const groupIdx = newboard.groups.findIndex((group) => group.id === groupId);\r\n    if (type === \"Group\") {\r\n      this.setState({ isAddGroup: false });\r\n      const group = { id: \"g\" + boardService.makeId(), title: text, cards: [] };\r\n      newboard.groups.push(group);\r\n      this.props.updateBoard(newboard);\r\n    } else if (type === \"Card\") {\r\n      const card = { id: \"c\" + boardService.makeId(), title: text };\r\n      newboard.groups[groupIdx].cards.push(card);\r\n      this.props.updateBoard(newboard);\r\n    }\r\n  };\r\n\r\n  updateState = (key, val) => {\r\n    this.setState({ [key]: val })\r\n  }\r\n  onEditGroup = () => {\r\n    this.setState({ isAddGroup: true })\r\n  }\r\n  onDragEnd = result => {\r\n    const { destination, source, draggableId } = result;\r\n    const columns = this.props.board.groups// groups are called columns in this func\r\n    if (!destination) return;\r\n    if (destination.droppableId === source.droppableId && destination.index === source.index) return;\r\n\r\n    const start = columns.find(start => start.id === source.droppableId);//finding the group from which a drag was started\r\n    const finish = columns.find(finish => finish.id === destination.droppableId);//finding the group from which a drag was ended\r\n\r\n    if (start === finish) {//in-group movements of cards\r\n      const newTaskIds = Array.from(start.cards);\r\n      const shiftedTask = newTaskIds.find(task => task.id === draggableId)//i added this code-line since the tutorial lacked it\r\n\r\n      newTaskIds.splice(source.index, 1)\r\n      newTaskIds.splice(destination.index, 0, shiftedTask)//and this 'shiftedTask' var as well \r\n\r\n\r\n      const newColumn = {\r\n        ...start,\r\n        cards: newTaskIds,\r\n      }\r\n\r\n      const newGroups = Array.from(columns);\r\n\r\n\r\n      const groupIdx = columns.findIndex(group => group.id === newColumn.id)\r\n\r\n      newGroups.splice(groupIdx, 1, newColumn)\r\n\r\n      const newState = {\r\n        ...this.props.board,\r\n        groups: newGroups\r\n      }\r\n      this.props.updateBoard(newState)\r\n      return;\r\n    }\r\n    // inter-groups-movement of cards:\r\n    const startTaskIds = Array.from(start.cards); //array-copy of the cards at the start-column\r\n    const shiftedTask = startTaskIds.find(task => task.id === draggableId)//(my-code) targeting the card i wish to DND and putting it as a var\r\n    startTaskIds.splice(source.index, 1);//cutting one card out at the start-column\r\n    const newStart = {\r\n      ...start,\r\n      cards: startTaskIds\r\n    } // creating a start column variable that is spread and also updated with cards (one card less..)\r\n\r\n\r\n    const finishtaskIds = Array.from(finish.cards);\r\n    finishtaskIds.splice(destination.index, 0, shiftedTask)\r\n    const newFinish = {\r\n      ...finish,\r\n      cards: finishtaskIds\r\n    }\r\n\r\n    const newGroups = Array.from(columns);\r\n    //here i need to prepare the final stage where i take the groups array, and make it updated. then i could send it to the newState.\r\n    const startGroupIdx = newGroups.findIndex(group => group.id === newStart.id)\r\n    const finishGroupIdx = newGroups.findIndex(group => group.id === newFinish.id)\r\n\r\n    newGroups.splice(startGroupIdx, 1, newStart)\r\n    newGroups.splice(finishGroupIdx, 1, newFinish)\r\n\r\n    const newState = {\r\n      ...this.props.board,\r\n      groups: newGroups\r\n    }\r\n    this.props.updateBoard(newState)\r\n    return;\r\n  }\r\n  onRemoveGroup = (groupId) => {\r\n    var newboard = { ...this.props.board };\r\n    newboard.groups = newboard.groups.filter((group) => group.id !== groupId);\r\n    this.props.updateBoard(newboard);\r\n  };\r\n  onRemoveCard = (cardId) => {\r\n    var newboard = JSON.parse(JSON.stringify(this.props.board));\r\n    const groupIdx = newboard.groups.findIndex(\r\n      (group) => group.id === this.state.isDetailsShown.groupId\r\n    );\r\n    const newCards = Array.from(newboard.groups[groupIdx].cards);\r\n    const cardIdx = newCards.findIndex((card) => card.id === cardId);\r\n    newCards.splice(cardIdx, 1);\r\n    newboard.groups[groupIdx].cards = newCards;\r\n    this.props.updateBoard(newboard);\r\n  };\r\n\r\n  render() {\r\n    const { board } = this.props\r\n    \r\n    if (board===null) return <LinearProgress />\r\n    return (\r\n      <div className=\"board-details \" style={{ backgroundImage: `url(${board.style.bgImg ? board.style.bgImg : ''})`, backgroundSize: \"cover\", backgroundRepeat: \"no-repeat\", minHeight: \"90vh\", backgroundColor: `${board.style.bgColor ? board.style.bgColor : ''}` }} >\r\n\r\n        <BoardHeader board={board}  updateBoard={this.props.updateBoard}/>\r\n\r\n\r\n        <DragDropContext onDragEnd={this.onDragEnd}>\r\n          <StickyBox className=\"groups-container flex\">\r\n            {board.groups.map(group => <CardList onAdd={this.onAdd} group={group} key={group.id} updateState={this.updateState} onRemoveGroup={this.onRemoveGroup} />)}\r\n            {this.state.isAddGroup ?\r\n              <AddText updateState={this.updateState} onAdd={this.onAdd} type=\"Group\" groupId={null} />\r\n              :\r\n              <button className=\"add-group btn\" onClick={() => this.onEditGroup()}>Add List</button>\r\n            }\r\n          </StickyBox>\r\n        </DragDropContext>\r\n\r\n        {this.state.isDetailsShown.cardId &&\r\n          <CardDetails updateState={this.updateState} onRemoveCard={this.onRemoveCard} cardId={this.state.isDetailsShown.cardId} groupId={this.state.isDetailsShown.groupId} />}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    board: state.boardReducer.currBoard,\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n  loadBoard,\r\n  updateBoard,\r\n  updateBoardFromSocket,\r\n  cleanBoard\r\n};\r\nexport const BoardDetails = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_BoardDetails);\r\n","import React from 'react'\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { FaUserCircle } from \"react-icons/fa\";\r\nimport { Avatar } from '@material-ui/core';\r\n\r\n\r\nexport function MembersChart({memberNumber}) {\r\n\r\n    const allMembers = [\r\n        {\r\n            _id: \"5f6f020e486616919e1f0de3\",\r\n            userName: \"Arik Einav\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1600864700/Taskit/erik_lnajh5.png\"\r\n        }, {\r\n            _id: \"5f6f0220486616919e1f13c2\",\r\n            userName: \"Shlomi Koplianski\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1600864700/Taskit/shlomi_rujmqc.png\"\r\n        }, {\r\n            _id: \"5f6f01f9486616919e1f0682\",\r\n            userName: \"Shahar Sadof\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1600864700/Taskit/shahar_wyjntk.png\"\r\n        }, {\r\n            _id: \"5f6f374f81cc744a0002589c\",\r\n            userName: \"Meital Lazarovich\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1601122561/Taskit/meital_xr42uc.png\"\r\n        }, {\r\n            _id: \"5f6f37c181cc744a0002589d\",\r\n            userName: \"Yaron Biton\",\r\n            imgUrl: \"https://res.cloudinary.com/cloudinary-img/image/upload/v1601123470/Taskit/Yaron_z1uuw2.png\"\r\n        },\r\n    ]\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    }\r\n    const onSelectMember = (userName) => {\r\n        handleClose()\r\n        var userToShow;\r\n        switch (userName) {\r\n            case 'Arik Einav':\r\n                userToShow = {num: 0, userName: 'Arik Einav'}\r\n                break;\r\n            case 'Shlomi Koplianski':\r\n                userToShow = {num: 1, userName: 'Shlomi Koplianski'}\r\n                break;\r\n            case 'Shahar Sadof':\r\n                userToShow = {num: 2, userName: 'Shahar Sadof'}\r\n                break;\r\n            case 'Meital Lazarovich':\r\n                userToShow = {num: 3, userName: 'Meital Lazarovich'}\r\n                break;\r\n            case 'Yaron Biton':\r\n                userToShow = {num: 4, userName: 'Yaron Biton'}\r\n                break;\r\n        \r\n            default:\r\n                break;\r\n        }\r\n        memberNumber(userToShow)\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"members-chart\">\r\n            <button className=\"choose-member-btn\" aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick} >\r\n                <FaUserCircle style={{ margin: \"0px 5px -2px\" }} />Member\r\n            </button>\r\n            <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleClose}\r\n            >\r\n                {allMembers &&\r\n                    allMembers.map(member =>\r\n                        <MenuItem key={member._id} className=\"user-in-list\">\r\n                            <div className=\"members flex\" onClick={() => onSelectMember(member.userName)}>\r\n                                <Avatar src={member.imgUrl} alt=\"img\" className=\"user-img\" />\r\n                                <p className=\"user-name\">{member.userName}</p>\r\n                            </div>\r\n                        </MenuItem>)\r\n                }\r\n            </Menu>\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport { Doughnut, Pie } from 'react-chartjs-2';\r\nimport { Line as LineChartData } from 'react-chartjs-2';\r\nimport { withRouter } from \"react-router\";\r\nimport { MembersChart } from '../cmps/MembersChart'\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\nconst datasetsForLine = [\r\n    {\r\n        label: '',\r\n        fillColor: 'rgba(220,220,220,0.2)',\r\n        strokeColor: 'rgba(220,220,220,1)',\r\n        pointColor: 'rgba(220,220,220,1)',\r\n        pointStrokeColor: '#fff',\r\n        pointHighlightFill: '#fff',\r\n        pointHighlightStroke: 'rgba(220,220,220,1)',\r\n        data: [0, 3.5, 5, 4, 6, 7, 6, 8],\r\n    },\r\n    {\r\n        label: '',\r\n        fillColor: 'rgba(151,187,205,0.2)',\r\n        strokeColor: 'rgba(151,187,205,1)',\r\n        pointColor: 'rgba(151,187,205,1)',\r\n        pointStrokeColor: '#fff',\r\n        pointHighlightFill: '#fff',\r\n        pointHighlightStroke: 'rgba(151,187,205,1)',\r\n        data: [0, 3, 4, 5, 7, 5, 7, 7.5],\r\n    },\r\n    {\r\n        label: '',\r\n        fillColor: 'rgba(151,187,205,0.2)',\r\n        strokeColor: 'rgba(151,187,205,1)',\r\n        pointColor: 'rgba(151,187,205,1)',\r\n        pointStrokeColor: '#fff',\r\n        pointHighlightFill: '#fff',\r\n        pointHighlightStroke: 'rgba(151,187,205,1)',\r\n        data: [0, 3.5, 4, 6, 4.5, 7, 5.5, 7.5],\r\n    },\r\n    {\r\n        label: '',\r\n        fillColor: 'rgba(151,187,205,0.2)',\r\n        strokeColor: 'rgba(151,187,205,1)',\r\n        pointColor: 'rgba(151,187,205,1)',\r\n        pointStrokeColor: '#fff',\r\n        pointHighlightFill: '#fff',\r\n        pointHighlightStroke: 'rgba(151,187,205,1)',\r\n        data: [0, 1, 2, 1, 1, 3, 2.5, 2],\r\n    },\r\n    {\r\n        label: '',\r\n        fillColor: 'rgba(151,187,205,0.2)',\r\n        strokeColor: 'rgba(151,187,205,1)',\r\n        pointColor: 'rgba(151,187,205,1)',\r\n        pointStrokeColor: '#fff',\r\n        pointHighlightFill: '#fff',\r\n        pointHighlightStroke: 'rgba(151,187,205,1)',\r\n        data: [0, 0, 0, 0, 0, 0, 0, 0],\r\n    }\r\n]\r\nfunction lineData(userToShow) {\r\n    return {\r\n        labels: ['Day 0', 'Day 2', 'Day 4', 'Day 6', 'Day 8', 'Day 10', 'Day 12', 'Day 14'],\r\n        datasets: [datasetsForLine[userToShow]]\r\n    }\r\n}\r\nconst options = {\r\n    scaleShowGridLines: true,\r\n    scaleGridLineColor: 'rgba(0,0,0,.05)',\r\n    scaleGridLineWidth: 1,\r\n    scaleShowHorizontalLines: true,\r\n    scaleShowVerticalLines: true,\r\n    bezierCurve: true,\r\n    bezierCurveTension: 0.4,\r\n    pointDot: true,\r\n    pointDotRadius: 4,\r\n    pointDotStrokeWidth: 1,\r\n    pointHitDetectionRadius: 20,\r\n    datasetStroke: true,\r\n    datasetStrokeWidth: 2,\r\n    datasetFill: true,\r\n    legendTemplate: '<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\\\"background-color:<%=datasets[i].strokeColor%>\\\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>',\r\n}\r\nconst styles = {\r\n    graphContainer: {\r\n        padding: '0 15px 10px'\r\n    }\r\n}\r\nfunction pieData() {\r\n    const labels = ['Done', 'In progress', 'Task']\r\n    const data = [5, 8, 12]\r\n    return {\r\n        labels,\r\n        datasets: [{\r\n            data,\r\n            backgroundColor: [\r\n                '#FF6384',\r\n                '#36A2EB',\r\n                '#FFCE56'\r\n            ],\r\n            hoverBackgroundColor: [\r\n                '#FF6384',\r\n                '#36A2EB',\r\n                '#FFCE56'\r\n            ]\r\n        }]\r\n    }\r\n}\r\nfunction doughnutData() {\r\n    const labels = ['Shahar', 'Arik', 'Shlomi']\r\n    const data = [12, 17, 20]\r\n    return {\r\n        labels,\r\n        datasets: [{\r\n            data,\r\n            backgroundColor: [\r\n                '#FF6384',\r\n                '#36A2EB',\r\n                '#FFCE56'\r\n            ],\r\n            hoverBackgroundColor: [\r\n                '#FF6384',\r\n                '#36A2EB',\r\n                '#FFCE56'\r\n            ]\r\n        }]\r\n    }\r\n}\r\n\r\nclass _GraphDetails extends Component {\r\n\r\n    state = {\r\n        boardId: null,\r\n        data1: null,\r\n        data2: null,\r\n        data3: null,\r\n        currUser: 'Arik Einav',\r\n        isChartsOn: true\r\n    }\r\n    componentDidMount() {\r\n        const { boardId } = this.props.match.params;\r\n        this.setState({ boardId })\r\n        this.setState({ data1: doughnutData() })\r\n        this.setState({ data2: pieData() })\r\n        this.setState({ data3: lineData(0) })\r\n    }\r\n    memberNumber = (userToShow) => {\r\n        this.setState({ data3: lineData(userToShow.num) })\r\n        this.setState({ currUser: userToShow.userName })\r\n        this.setState({ isChartsOn: false })\r\n        setTimeout(() => {\r\n            this.setState({ isChartsOn: true })\r\n        }, 10);\r\n\r\n    }\r\n    backToBoard = () => {\r\n        this.props.history.push(`/board/${this.state.boardId}`)\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        if (!this.state.data1 || !this.state.data2 || !this.state.data3) return <LinearProgress />\r\n\r\n        return (\r\n            <div>\r\n                <button className=\"back-board-btn\" onClick={this.backToBoard}>Back</button>\r\n\r\n                <div className=\"flex\">\r\n                    <div className=\"doughnut-chart\">\r\n                        <h3>All Tasks</h3>\r\n                        <div className=\"graph-container\">\r\n                            {this.state.isChartsOn && <Doughnut data={this.state.data1} options={options}\r\n                                width={500} height={250} />}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"pie-chart\">\r\n                        <h3>Status per member</h3>\r\n                        <div className=\"graph-container\">\r\n                            {this.state.isChartsOn && <Pie data={this.state.data2} options={options}\r\n                                width={500} height={250} />}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"line-chart\">\r\n                    <h4>Tasks per day of {`${this.state.currUser}`}</h4>\r\n                    <MembersChart memberNumber={this.memberNumber} />\r\n                    <p>Tasks</p>\r\n                    <div style={styles.graphContainer}>\r\n                        {this.state.isChartsOn && <LineChartData data={this.state.data3}\r\n                            options={options}\r\n                            width={600} height={150} />}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport const GraphDetails = withRouter(_GraphDetails)\r\n","import { Home } from './pages/Home.jsx'\r\nimport { BoardApp } from './pages/BoardApp.jsx'\r\nimport { BoardDetails } from './pages/BoardDetails.jsx'\r\nimport { GraphDetails } from './pages/GraphDetails.jsx'\r\n\r\nexport default [\r\n    {\r\n        path: '/board/:boardId',\r\n        component: BoardDetails\r\n    },\r\n    {\r\n        path: '/graph/:boardId',\r\n        component: GraphDetails\r\n    },\r\n    {\r\n        path: '/board',\r\n        component: BoardApp\r\n    },\r\n    {\r\n        path: '/',\r\n        component: Home\r\n    }\r\n]\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\n\r\n\r\nexport function Home() {\r\n    return (\r\n        <div>\r\n            <div className=\"home flex column align-center justify-center\">\r\n            <Link className=\"enter flex\" to=\"/board\"><p>Try It Now</p></Link>\r\n        <img src=\"https://res.cloudinary.com/dib9frb0w/image/upload/v1601370863/kanban5_wdldql.jpg\" alt=\"\"/>\r\n            \r\n            </div>\r\n            <div className=\"home-details-container\">\r\n              \r\n                <div className=\"home-details flex\">\r\n                    <img src=\"https://res.cloudinary.com/dsfnyykw9/image/upload/v1601040007/vectorstock_25716430_e79vvh.jpg\" alt=\"img\"/>\r\n                    <div className=\"info\">\r\n                        <h2>Efficient Organizing Tool</h2>\r\n                        <p>Taskit provides the upmost efficient platform to architecte your work time table. Allow us to help you do, What You Do, Better! </p>\r\n                    </div>\r\n                </div >\r\n\r\n                \r\n                <div  className=\"home-details second  flex\">\r\n                    <div className=\"info\">\r\n                        <h2>Manage your Performance</h2>\r\n                        <p>Be it your mobile phone, tablet or desktop computer, team leaders are now able to supervise their team's effort, gain a closer look at the team's work-progress, delegate authority to team members and manage the project more effectively</p>\r\n                    </div>\r\n                    <img src=\"https://res.cloudinary.com/dsfnyykw9/image/upload/v1601042641/vectorstock_29242780_wd2ele.jpg\" alt=\"img\"/>\r\n                </div >\r\n\r\n                <div  className=\"home-details flex\">\r\n                    <img src=\"https://res.cloudinary.com/dsfnyykw9/image/upload/v1601043061/vectorstock_31608808_og58qj.jpg\" alt=\"img\"/>\r\n                    <div className=\"info\">\r\n                        <h2>Make it yours</h2>\r\n                        <p>Make it feel like home for you and your team. Customize the board's design, organize your lists to fit the team's flow. Taskit, along with its many features allow an accesible and flexible design to all.</p>\r\n                    </div>\r\n                </div >\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { login } from \"../store/actions/userActions\";\r\nimport TextField from \"@material-ui/core/TextField\"\r\n\r\nclass _Login extends Component {\r\n  \r\n  state = {\r\n\r\n    msg: \"\",\r\n    loginCred: {\r\n      userName: \"\",\r\n      password: \"\",\r\n    },\r\n  };\r\n  \r\n\r\n  loginHandleChange = (ev) => {\r\n    const { name, value } = ev.target;\r\n    this.setState((prevState) => ({msg:\"\",\r\n      loginCred: {\r\n        ...prevState.loginCred,\r\n        [name]: value,\r\n      },\r\n    }));\r\n  };\r\n\r\n  doLogin = async (ev) => {\r\n    ev.preventDefault();\r\n    const { userName, password } = this.state.loginCred;\r\n    if (!userName || !password) {\r\n      return this.setState({ msg: \"Please enter user/password\" });\r\n    }\r\n\r\n    const userCreds = { userName, password };\r\n    const user = await this.props.login(userCreds)\r\n      if (!user) this.setState({ msg: \"There isn't an account for this user\" })\r\n      else{\r\n    this.props.onCloseModal()\r\n    this.setState({ loginCred: { userName: \"\", password: \"\" } });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div >\r\n        <h3>Login to Taskit</h3>\r\n        <form className=\"login-page\" onSubmit={this.doLogin}>\r\n              <TextField\r\n            id=\"outlined-basic\"\r\n            type=\"text\"\r\n            name=\"userName\"\r\n            value={this.state.loginCred.userName}\r\n            onChange={this.loginHandleChange}\r\n            label=\"Username\"\r\n            variant=\"outlined\"\r\n          />\r\n\r\n          <br />\r\n          <TextField\r\n            id=\"outlined-password-input\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={this.state.loginCred.password}\r\n            onChange={this.loginHandleChange}\r\n            autoComplete=\"current-password\"\r\n            variant=\"outlined\"\r\n          />\r\n          <br/>\r\n          \r\n     {this.state.msg &&<div className=\"error-msg\"> <h5>{this.state.msg}</h5></div>} \r\n     <br/>\r\n     <br/>\r\n          <button className=\"btn login-btn\">Login</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    loggedInUser: state.userReducer.loggedInUser,\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n\r\n  login,\r\n};\r\n\r\n\r\nexport const Login = connect(mapStateToProps, mapDispatchToProps)(_Login);\r\n","// import { cloneElement } from \"react\";\r\nimport { userService } from \"../../services/userService\";\r\n\r\nexport function login(userCreds) {\r\n  return async dispatch => {\r\n    const user = await userService.login(userCreds);\r\n    if(!user) return;\r\n    dispatch({ type: 'SET_USER', user }); \r\n    window.location.assign('#/board')\r\n    return user\r\n    }\r\n};\r\nexport function signup(userCreds) {\r\n  return async dispatch => {\r\n    const user = await userService.signup(userCreds);\r\n    dispatch({ type: 'SET_USER', user });\r\n    window.location.assign('#/board')\r\n  };\r\n}\r\nexport function logout() {\r\n  return async dispatch => {\r\n    await userService.logout();\r\n    dispatch({ type: 'SET_USER', user: null });\r\n    window.location.assign('#/')\r\n\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport function update(userCreds) {\r\n  return async dispatch => {\r\n    const user = await userService.signup(userCreds);\r\n    dispatch({ type: 'SET_USER', user });\r\n    window.location.assign('#/board')\r\n  };\r\n}\r\n\r\nexport function loginAsGuest() {\r\n  return async dispatch => {\r\n    const user = await userService.loginAsGuest();\r\n    dispatch({ type: 'SET_USER', user });\r\n    window.location.assign('#/board')\r\n  };\r\n}","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { signup } from \"../store/actions/userActions\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nclass _Submit extends Component {\r\n  state = {\r\n    msg: \"\",\r\n    signupCred: {\r\n      password: \"\",\r\n      userName: \"\",\r\n    },\r\n  };\r\n\r\n  signupHandleChange = (ev) => {\r\n    const { name, value } = ev.target;\r\n    this.setState((prevState) => ({msg:\"\",\r\n      signupCred: {\r\n        ...prevState.signupCred,\r\n        [name]: value,\r\n      },\r\n    }));\r\n  };\r\n\r\n  doSignup = async (ev) => {\r\n    ev.preventDefault();\r\n    const { userName, password } = this.state.signupCred;\r\n    if (!userName || !password) {\r\n      return this.setState({ msg: \"All inputs are required!\" });\r\n    }\r\n    const signupCreds = { userName, password };\r\n    this.props.signup(signupCreds);\r\n    this.props.onCloseModal();\r\n    this.setState({ signupCred: { userName: \"\", password: \"\" } });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div >\r\n        <h3>Sign in to Taskit</h3>\r\n        <form className=\"login-page\" onSubmit={this.doSignup}>\r\n\r\n          <TextField\r\n            id=\"outlined-basic\"\r\n            type=\"text\"\r\n            name=\"userName\"\r\n            value={this.state.signupCred.userName}\r\n            onChange={this.signupHandleChange}\r\n            label=\"Username\"\r\n            variant=\"outlined\"\r\n          />\r\n\r\n          <br />\r\n\r\n          <TextField\r\n            id=\"outlined-password-input\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={this.state.signupCred.password}\r\n            onChange={this.signupHandleChange}\r\n            autoComplete=\"current-password\"\r\n            variant=\"outlined\"\r\n          />\r\n          <br />\r\n          {this.state.msg &&<div className=\"error-msg\"> <h5>{this.state.msg}</h5></div>} \r\n     <br/>\r\n     <br/>\r\n          <button className=\"btn login-btn\">Signin</button>\r\n        </form>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    loggedInUser: state.userReducer.loggedInUser,\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n  signup,\r\n};\r\n\r\nexport const Submit = connect(mapStateToProps, mapDispatchToProps)(_Submit);\r\n","import React from 'react'\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport { Avatar } from '@material-ui/core';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { Login } from './Login'\r\nimport { Submit } from './Submit'\r\nimport { Modal } from './Modal'\r\nimport { logout } from \"../store/actions/userActions\";\r\n\r\n\r\nclass _NavBar extends React.Component {\r\n  _isMounted = false\r\n  state = {\r\n    isLogged: false,\r\n    isSignIn: false,\r\n    isModalShow: false,\r\n    isIn: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.loggedInUser) this.setState({ isIn: true });\r\n  }\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  onIsLogged = () => {\r\n    this.setState({ isLogged: true, isModalShow: true, isSignIn: false })\r\n\r\n  }\r\n  onIsSubmit = () => {\r\n    this.setState({ isSignIn: true, isModalShow: true, isLogged: false })\r\n  }\r\n\r\n  onCloseModal = () => {\r\n    this.setState({ isSignIn: false, isModalShow: false, isLogged: false, isIn: true })\r\n  }\r\n  onClose = () => {\r\n    this.setState({ isSignIn: false, isModalShow: false, isLogged: false })\r\n  }\r\n  onLoginHere = () => {\r\n    this.setState({ isSignIn: false, isLogged: true })\r\n  }\r\n  onLogOut = () => {\r\n    this.setState({ isIn: false })\r\n    this.props.logout()\r\n  }\r\n  getAvatar(member) {\r\n    if (member && member.imgUrl) {\r\n        return <Avatar key={member._id} src={member.imgUrl} className=\"avatar\" />\r\n    }\r\n    if (member) {\r\n        return <Avatar key={member._id} className=\"avatar\">{member.userName.substring(0, 1).toUpperCase()}{member.userName.substring(1, 2).toUpperCase()}</Avatar>\r\n    }\r\n    return <Avatar className=\"avatar\" />\r\n}\r\n\r\n  render() {\r\n    const { loggedInUser } = this.props\r\n\r\n    return (\r\n      <nav className=\"nav-bar grid align-center\">\r\n        <div className=\"navdiv-s\"><NavLink to=\"/board\">Boards</NavLink></div>\r\n        <div className=\"logo\"><NavLink to=\"/\">Task<span className=\"logo-i\">i</span>t</NavLink></div>\r\n\r\n        <div className={`navdiv-s signup ${(!this.state.isIn) ? '' : 'hide'}`} onClick={this.onIsSubmit}>Sign Up</div>\r\n        <div className={`navdiv-s login  ${(!this.state.isIn) ? '' : 'hide'}`} onClick={this.onIsLogged}>Login</div>\r\n        <div className={`navdiv-s signup logout ${(!this.state.isIn) ? 'hide' : ''}`} onClick={this.onLogOut}>LogOut</div>\r\n        {loggedInUser && <div className=\"navdiv-s login user-avatar-navbar\">{this.getAvatar(loggedInUser)}</div>}\r\n\r\n        {this.state.isLogged && <Modal\r\n          isForLog={true}\r\n          onClose={this.onClose}\r\n          children={<Login onCloseModal={this.onCloseModal} />}\r\n        />}\r\n        {this.state.isSignIn && <Modal\r\n          onLoginHere={this.onLoginHere}\r\n          isForLog={true}\r\n          onClose={this.onClose}\r\n          children={<Submit onCloseModal={this.onCloseModal} />}\r\n        />}\r\n      </nav>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    loggedInUser: state.userReducer.loggedInUser,\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n  logout,\r\n};\r\n\r\nexport const NavBar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_NavBar));\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport routes from './routes.js'\r\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { NavBar } from './cmps/NavBar'\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        <NavBar />\r\n        <Switch>\r\n            {routes.map(route => <Route key={route.path} exact component={route.component} path={route.path} />)}\r\n        </Switch>\r\n      </Router>\r\n      \r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const initialState = {\r\n    boards: [],\r\n    currBoard : null\r\n  };\r\n  \r\n  export function boardReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n      case \"SET_BOARDS\":\r\n  \r\n        return {\r\n          ...state,\r\n          boards: [...action.boards],\r\n        };\r\n        case \"SET_BOARD\":\r\n            return {\r\n              ...state,\r\n              currBoard: {...action.board},\r\n            };\r\n      case \"REMOVE_BOARD\":\r\n        return {\r\n          ...state,\r\n          boards: state.boards.filter((board) => board._id !== action.id),\r\n        };\r\n  \r\n      case \"ADD_BOARD\":\r\n        return {\r\n          ...state,\r\n          boards: [...state.boards, action.board],\r\n        };\r\n      case \"UPDATE_BOARD\":\r\n        return {\r\n          ...state,\r\n          currBoard: {...action.board},\r\n        };\r\n        case \"CLEAN_BOARD\":\r\n        return {\r\n          ...state,\r\n          currBoard: action.value,\r\n        };\r\n  \r\n      default:\r\n        return state;\r\n    }\r\n  }","// let localLoggedinUser = null;\r\n// if (sessionStorage.user) localLoggedinUser = JSON.parse(sessionStorage.user);\r\n\r\nconst initialState = {\r\n  loggedInUser: null,\r\n};\r\n\r\nexport function userReducer (state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      return { ...state, loggedInUser: action.user };\r\n    default:\r\n      return state;\r\n  }\r\n}","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\n\r\nimport thunk from 'redux-thunk';\r\nimport {boardReducer} from './reducers/boardReducer';\r\nimport {userReducer} from './reducers/userReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    boardReducer,\r\n    userReducer\r\n})\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './store/store';\r\n\r\nimport './styles/global.scss';\r\n\r\nReactDOM.render(\r\n  //  <React.StrictMode>\r\n    <Provider store={ store }>\r\n    <App />\r\n    </Provider>,\r\n  //  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}